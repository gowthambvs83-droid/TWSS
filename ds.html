<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Science from Scratch - Complete Interactive Learning Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700&family=Inconsolata:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --info-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --sidebar-width: 320px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans Pro', sans-serif;
            line-height: 1.7;
            color: #333;
            background-color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(135deg, var(--primary-color) 0%, #34495e 100%);
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: var(--transition);
            box-shadow: var(--shadow-lg);
        }

        .sidebar-header {
            padding: 30px 20px;
            background: rgba(0, 0, 0, 0.1);
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .sidebar-header p {
            font-size: 0.95rem;
            opacity: 0.9;
            font-style: italic;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            padding: 14px 20px;
            cursor: pointer;
            transition: var(--transition);
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--secondary-color);
        }

        .nav-item.active {
            background-color: rgba(255, 255, 255, 0.15);
            border-left: 4px solid var(--accent-color);
        }

        .nav-item i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }

        .sub-menu {
            display: none;
            background-color: rgba(0, 0, 0, 0.1);
        }

        .sub-menu.active {
            display: block;
        }

        .sub-nav-item {
            padding: 12px 20px 12px 52px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            font-weight: 400;
        }

        .sub-nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .sub-nav-item.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 3px solid var(--secondary-color);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 40px;
            max-width: calc(100% - var(--sidebar-width));
            background-color: #ffffff;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--light-color);
        }

        .section-header h1 {
            font-size: 2.8rem;
            color: var(--primary-color);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .section-header p {
            font-size: 1.2rem;
            color: #666;
            max-width: 800px;
        }

        .content-block {
            margin-bottom: 50px;
        }

        .content-block h2 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--light-color);
            font-weight: 600;
        }

        .content-block h3 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 25px 0 15px;
            font-weight: 600;
        }

        .content-block h4 {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin: 20px 0 10px;
            font-weight: 600;
        }

        .content-block p {
            margin-bottom: 18px;
            font-size: 1.05rem;
            line-height: 1.8;
            color: #444;
        }

        .content-block ul, .content-block ol {
            margin-left: 30px;
            margin-bottom: 20px;
        }

        .content-block li {
            margin-bottom: 10px;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        /* Code Blocks */
        .code-container {
            margin: 25px 0;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            background: #2d2d2d;
        }

        .code-header {
            background: linear-gradient(135deg, #2d2d2d 0%, #1e1e1e 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }

        .code-title {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .code-actions {
            display: flex;
            gap: 10px;
        }

        .run-button, .copy-button {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .run-button:hover, .copy-button:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        .copy-button {
            background: var(--success-color);
        }

        .copy-button:hover {
            background: #229954;
        }

        .code-block {
            background: #2d2d2d;
            padding: 20px;
            overflow-x: auto;
            font-family: 'Inconsolata', monospace;
        }

        .code-output {
            background: #1e1e1e;
            padding: 20px;
            border-top: 1px solid #444;
            font-family: 'Inconsolata', monospace;
            white-space: pre-wrap;
            display: none;
            color: #f8f8f2;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-output.active {
            display: block;
        }

        /* Visualizations */
        .viz-container {
            margin: 35px 0;
            padding: 25px;
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .viz-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .chart-container {
            position: relative;
            height: 450px;
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* Math Formula */
        .math-formula {
            margin: 25px 0;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: var(--border-radius);
            text-align: center;
            font-size: 1.2rem;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Info Boxes */
        .info-box {
            margin: 25px 0;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .info-box.tip {
            background-color: #d4edda;
            border-left: 5px solid var(--success-color);
        }

        .info-box.warning {
            background-color: #fff3cd;
            border-left: 5px solid var(--warning-color);
        }

        .info-box.note {
            background-color: #d1ecf1;
            border-left: 5px solid var(--info-color);
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 1.1rem;
        }

        .info-box-title i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Interactive Elements */
        .interactive-demo {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius);
            color: white;
        }

        .demo-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .demo-control {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .demo-control label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .demo-control input, .demo-control select {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            font-size: 0.95rem;
        }

        .demo-button {
            background: white;
            color: var(--primary-color);
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(0, 0, 0, 0.1);
            z-index: 2000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Table of Contents */
        .toc-container {
            position: fixed;
            right: 20px;
            top: 100px;
            width: 250px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
            z-index: 900;
        }

        .toc-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .toc-item {
            padding: 8px 0;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            color: #666;
        }

        .toc-item:hover {
            color: var(--secondary-color);
        }

        .toc-item.active {
            color: var(--accent-color);
            font-weight: 600;
        }

        /* Mobile Toggle */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            transform: scale(1.1);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .toc-container {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                max-width: 100%;
                padding: 20px;
            }

            .menu-toggle {
                display: block;
            }

            .section-header h1 {
                font-size: 2.2rem;
            }

            .chart-container {
                height: 300px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-brain"></i> Data Science</h2>
                <p>From Scratch with Python</p>
            </div>
            <div class="nav-menu">
                <div class="nav-item active" data-section="introduction">
                    <i class="fas fa-home"></i> Introduction
                </div>
                <div class="nav-item" data-section="python-crash">
                    <i class="fas fa-code"></i> Python Crash Course
                </div>
                <div class="nav-item" data-section="visualizing-data">
                    <i class="fas fa-chart-bar"></i> Visualizing Data
                </div>
                <div class="nav-item" data-section="linear-algebra">
                    <i class="fas fa-calculator"></i> Linear Algebra
                </div>
                <div class="nav-item" data-section="statistics">
                    <i class="fas fa-chart-line"></i> Statistics
                </div>
                <div class="nav-item" data-section="probability">
                    <i class="fas fa-dice"></i> Probability
                </div>
                <div class="nav-item" data-section="hypothesis-inference">
                    <i class="fas fa-flask"></i> Hypothesis and Inference
                </div>
                <div class="nav-item" data-section="gradient-descent">
                    <i class="fas fa-arrow-down"></i> Gradient Descent
                </div>
                <div class="nav-item" data-section="getting-data">
                    <i class="fas fa-database"></i> Getting Data
                </div>
                <div class="nav-item" data-section="working-data">
                    <i class="fas fa-cogs"></i> Working with Data
                </div>
                <div class="nav-item" data-section="machine-learning">
                    <i class="fas fa-robot"></i> Machine Learning
                    <div class="sub-menu">
                        <div class="sub-nav-item" data-section="knn">k-Nearest Neighbors</div>
                        <div class="sub-nav-item" data-section="naive-bayes">Naive Bayes</div>
                        <div class="sub-nav-item" data-section="linear-regression">Linear Regression</div>
                        <div class="sub-nav-item" data-section="multiple-regression">Multiple Regression</div>
                        <div class="sub-nav-item" data-section="logistic-regression">Logistic Regression</div>
                        <div class="sub-nav-item" data-section="decision-trees">Decision Trees</div>
                        <div class="sub-nav-item" data-section="neural-networks">Neural Networks</div>
                        <div class="sub-nav-item" data-section="clustering">Clustering</div>
                    </div>
                </div>
                <div class="nav-item" data-section="nlp">
                    <i class="fas fa-language"></i> Natural Language Processing
                </div>
                <div class="nav-item" data-section="network-analysis">
                    <i class="fas fa-project-diagram"></i> Network Analysis
                </div>
                <div class="nav-item" data-section="recommender-systems">
                    <i class="fas fa-star"></i> Recommender Systems
                </div>
                <div class="nav-item" data-section="databases">
                    <i class="fas fa-table"></i> Databases and SQL
                </div>
                <div class="nav-item" data-section="mapreduce">
                    <i class="fas fa-server"></i> MapReduce
                </div>
            </div>
        </nav>

        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Table of Contents -->
        <div class="toc-container" id="tocContainer">
            <div class="toc-title">Table of Contents</div>
            <div id="tocContent"></div>
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Introduction Section -->
            <section class="content-section active" id="introduction">
                <div class="section-header">
                    <h1>Introduction to Data Science</h1>
                    <p>Understanding the foundations of data science and why it matters in today's world. Learn how to extract insights from messy data using Python.</p>
                </div>

                <div class="content-block">
                    <h2>The Ascendance of Data</h2>
                    <p>We live in a world that's drowning in data. Websites track every user's every click. Your smartphone is building up a record of your location and speed every second of every day. "Quantified selfers" wear pedometers-on-steroids that are ever recording their heart rates, movement habits, diet, and sleep patterns. Smart cars collect driving habits, smart homes collect living habits, and smart marketers collect purchasing habits.</p>
                    
                    <p>The Internet itself represents a huge graph of knowledge that contains (among other things) an enormous cross-referenced encyclopedia; domain-specific databases about movies, music, sports results, pinball machines, memes, and cocktails; and too many government statistics (some of them nearly true!) from too many governments to wrap your head around.</p>
                    
                    <p>Buried in these data are answers to countless questions that no one's even thought to ask. In this book, we'll learn how to find them.</p>
                    
                    <div class="viz-container">
                        <div class="viz-title">Data Growth Over Time (Zettabytes)</div>
                        <div class="chart-container">
                            <canvas id="dataGrowthChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>What Is Data Science?</h2>
                    <p>There's a joke that says a data scientist is someone who knows more statistics than a computer scientist and more computer science than a statistician. (I didn't say it was a good joke.) In fact, some data scientists are—for all practical purposes—statisticians, while others are pretty much indistinguishable from software engineers. Some are machine-learning experts, while others couldn't machine-learn their way out of kindergarten. Some are PhDs with impressive publication records, while others have never read an academic paper (shame on them, though). In short, pretty much no matter how you define data science, you'll find practitioners for whom the definition is totally, absolutely wrong.</p>
                    
                    <p>Nonetheless, we won't let that stop us from trying. We'll say that a data scientist is someone who extracts insights from messy data. Today's world is full of people trying to turn data into insight.</p>
                    
                    <div class="info-box note">
                        <div class="info-box-title"><i class="fas fa-info-circle"></i> Note</div>
                        <p>Data science lies at the intersection of hacking skills, math and statistics knowledge, and substantive expertise.</p>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Data Science Venn Diagram</div>
                        <div class="chart-container">
                            <canvas id="vennDiagram"></canvas>
                        </div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Motivating Hypothetical: DataSciencester</h2>
                    <p>Congratulations! You've just been hired to lead the data science efforts at DataSciencester, the social network for data scientists.</p>
                    
                    <p>Despite being for data scientists, DataSciencester has never actually invested in building its own data science practice. (In fairness, DataSciencester has never really invested in building its product either.) That will be your job! Throughout the book, we'll be learning about data science concepts by solving problems that you encounter at work. Sometimes we'll look at data explicitly supplied by users, sometimes we'll look at data generated through their interactions with the site, and sometimes we'll even look at data from experiments that we'll design.</p>
                    
                    <p>And because DataSciencester has a strong "not-invented-here" mentality, we'll be building our own tools from scratch. At the end, you'll have a pretty solid understanding of the fundamentals of data science. And you'll be ready to apply your skills at a company with a less shaky premise, or to any other problems that happen to interest you.</p>
                </div>

                <div class="content-block">
                    <h2>Finding Key Connectors</h2>
                    <p>It's your first day on the job at DataSciencester, and the VP of Networking is full of questions about your users. Until now he's had no one to ask, so he's very excited to have you aboard.</p>
                    
                    <p>In particular, he wants you to identify who the "key connectors" are among data scientists. To this end, he gives you a dump of the entire DataSciencester network. (In real life, people don't typically hand you the data you need. Chapter 9 is devoted to getting data.)</p>
                    
                    <p>What does this data dump look like? It consists of a list of users, each represented by a dict that contains for each user his or her id (which is a number) and name (which, in one of the great cosmic coincidences, rhymes with the user's id):</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: User Data</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># User data for DataSciencester network
users = [
    { "id": 0, "name": "Hero" },
    { "id": 1, "name": "Dunn" },
    { "id": 2, "name": "Sue" },
    { "id": 3, "name": "Chi" },
    { "id": 4, "name": "Thor" },
    { "id": 5, "name": "Clive" },
    { "id": 6, "name": "Hicks" },
    { "id": 7, "name": "Devin" },
    { "id": 8, "name": "Kate" },
    { "id": 9, "name": "Klein" }
]

print("Users in the DataSciencester network:")
for user in users:
    print(f"ID: {user['id']}, Name: {user['name']}")

# Friendship connections
friendships = [(0, 1), (0, 2), (1, 2), (1, 3), (2, 3), (3, 4),
               (4, 5), (5, 6), (5, 7), (6, 8), (7, 8), (8, 9)]

print("\nFriendship connections:")
for i, j in friendships:
    user_i = next(user for user in users if user["id"] == i)
    user_j = next(user for user in users if user["id"] == j)
    print(f"{user_i['name']} is friends with {user_j['name']}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <p>For example, the tuple (0, 1) indicates that the data scientist with id 0 (Hero) and the data scientist with id 1 (Dunn) are friends.</p>
                    
                    <div class="viz-container">
                        <div class="viz-title">DataSciencester Network Visualization</div>
                        <div class="chart-container">
                            <canvas id="networkChart"></canvas>
                        </div>
                    </div>
                    
                    <p>Since we represented our users as dicts, it's easy to augment them with extra data. For example, we might want to add a list of friends to each user:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Adding Friends to Users</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># First we set each user's friends property to an empty list
for user in users:
    user["friends"] = []

# Then we populate the lists using the friendships data
for i, j in friendships:
    # this works because users[i] is the user whose id is i
    users[i]["friends"].append(users[j])  # add j as a friend of i
    users[j]["friends"].append(users[i])  # add i as a friend of j

# Now we can see the friends for each user
print("Users and their friends:")
for user in users:
    friend_names = [friend["name"] for friend in user["friends"]]
    print(f"{user['name']} is friends with: {', '.join(friend_names)}")

# Calculate average number of connections
def number_of_friends(user):
    """how many friends does _user_ have?"""
    return len(user["friends"])

total_connections = sum(number_of_friends(user) for user in users)
num_users = len(users)
avg_connections = total_connections / num_users

print(f"\nTotal connections: {total_connections}")
print(f"Number of users: {num_users}")
print(f"Average connections per user: {avg_connections:.2f}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <p>It's also easy to find the most connected people—they're the people who have the largest number of friends.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Most Connected Users</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># create a list (user_id, number_of_friends)
num_friends_by_id = [(user["id"], number_of_friends(user)) for user in users]

sorted_users = sorted(num_friends_by_id, 
                      key=lambda user_id_friends: user_id_friends[1], 
                      reverse=True)  # largest to smallest

print("Users sorted by number of friends (most to least):")
for user_id, num_friends in sorted_users:
    user_name = next(user for user in users if user["id"] == user_id)["name"]
    print(f"{user_name} (ID: {user_id}): {num_friends} friends")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Number of Friends per User</div>
                        <div class="chart-container">
                            <canvas id="friendsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="info-box tip">
                        <div class="info-box-title"><i class="fas fa-lightbulb"></i> Tip</div>
                        <p>What we've just computed is the network metric degree centrality. This has the virtue of being pretty easy to calculate, but it doesn't always give the results you'd want or expect.</p>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Data Scientists You May Know</h2>
                    <p>While you're still filling out new-hire paperwork, the VP of Fraternization comes by your desk. She wants to encourage more connections among your members, and she asks you to design a "Data Scientists You May Know" suggester.</p>
                    
                    <p>Your first instinct is to suggest that a user might know the friends of friends. These are easy to compute: for each of a user's friends, iterate over that person's friends, and collect all the results:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Friends of Friends (Simple)</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">def friends_of_friend_ids_bad(user):
    # "foaf" is short for "friend of a friend"
    return [foaf["id"]
            for friend in user["friends"]  # for each of user's friends
            for foaf in friend["friends"]]  # get each of _their_ friends

# Let's see who Hero (user 0) might know
hero = users[0]
foaf_ids = friends_of_friend_ids_bad(hero)
print(f"Friends of friends for {hero['name']}: {foaf_ids}")

# Let's get the names of these potential connections
foaf_names = []
for user_id in foaf_ids:
    user = next((u for u in users if u["id"] == user_id), None)
    if user:
        foaf_names.append(user["name"])

print(f"Potential connections for {hero['name']}: {foaf_names}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <p>When we call this on users[0] (Hero), it produces some issues. It includes user 0 (twice), since Hero is indeed friends with both of his friends. It includes users 1 and 2, although they are both friends with Hero already. And it includes user 3 twice, as Chi is reachable through two different friends.</p>
                    
                    <p>Knowing that people are friends-of-friends in multiple ways seems like interesting information, so maybe instead we should produce a count of mutual friends. And we definitely should use a helper function to exclude people already known to the user:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Friends of Friends (Improved)</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">from collections import Counter

def not_the_same(user, other_user):
    """two users are not the same if they have different ids"""
    return user["id"] != other_user["id"]

def not_friends(user, other_user):
    """other_user is not a friend if he's not in user["friends"];
    that is, if he's not_the_same as all the people in user["friends"]"""
    return all(not_the_same(user, friend) for friend in user["friends"])

def friends_of_friend_ids(user):
    return Counter(foaf["id"]
                   for friend in user["friends"]  # for each of my friends
                   for foaf in friend["friends"]  # count *their* friends
                   if not_the_same(user, foaf)  # who aren't me
                   and not_friends(user, foaf))  # and aren't my friends

# Let's see who Chi (user 3) might know
chi = users[3]
foaf_counts = friends_of_friend_ids(chi)
print(f"Friends of friends for {chi['name']} with mutual friend counts:")

for user_id, count in foaf_counts.items():
    user = next((u for u in users if u["id"] == user_id), None)
    if user:
        print(f"{user['name']} (ID: {user_id}): {count} mutual friends")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Mutual Friends Visualization</div>
                        <div class="chart-container">
                            <canvas id="mutualFriendsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="info-box warning">
                        <div class="info-box-title"><i class="fas fa-exclamation-triangle"></i> Warning</div>
                        <p>As a data scientist, you know that you also might enjoy meeting users with similar interests. This is a good example of the "substantive expertise" aspect of data science.</p>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Salaries and Experience</h2>
                    <p>Right as you're about to head to lunch, the VP of Public Relations asks if you can provide some fun facts about how much data scientists earn. Salary data is of course sensitive, but he manages to provide you an anonymous data set containing each user's salary (in dollars) and tenure as a data scientist (in years):</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Salary Data Analysis</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">salaries_and_tenures = [(83000, 8.7), (88000, 8.1),
                         (48000, 0.7), (76000, 6),
                         (69000, 6.5), (76000, 7.5),
                         (60000, 2.5), (83000, 10),
                         (48000, 1.9), (63000, 4.2)]

print("Salary and tenure data:")
for salary, tenure in salaries_and_tenures:
    print(f"Salary: ${salary:,}, Tenure: {tenure} years")

# Calculate average salary by tenure bucket
def tenure_bucket(tenure):
    if tenure < 2:
        return "less than two"
    elif tenure < 5:
        return "between two and five"
    else:
        return "more than five"

from collections import defaultdict

# keys are tenure buckets, values are lists of salaries for that bucket
salary_by_tenure_bucket = defaultdict(list)
for salary, tenure in salaries_and_tenures:
    bucket = tenure_bucket(tenure)
    salary_by_tenure_bucket[bucket].append(salary)

# keys are tenure buckets, values are average salary for that bucket
average_salary_by_bucket = {
    tenure_bucket: sum(salaries) / len(salaries)
    for tenure_bucket, salaries in salary_by_tenure_bucket.items()
}

print("\nAverage salary by tenure bucket:")
for bucket, avg_salary in sorted(average_salary_by_bucket.items()):
    print(f"{bucket} years: ${avg_salary:,.2f}")

# Calculate the percentage increase
less_than_two = average_salary_by_bucket["less than two"]
more_than_five = average_salary_by_bucket["more than five"]
increase = ((more_than_five - less_than_two) / less_than_two) * 100

print(f"\nSalary increase: {increase:.1f}%")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Salary by Years of Experience</div>
                        <div class="chart-container">
                            <canvas id="salaryChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Average Salary by Tenure Bucket</div>
                        <div class="chart-container">
                            <canvas id="salaryBucketChart"></canvas>
                        </div>
                    </div>
                    
                    <p>And you have your soundbite: "Data scientists with more than five years experience earn 65% more than data scientists with little or no experience!"</p>
                    
                    <div class="info-box tip">
                        <div class="info-box-title"><i class="fas fa-lightbulb"></i> Tip</div>
                        <p>But we chose the buckets in a pretty arbitrary way. What we'd really like is to make some sort of statement about the salary effect—on average—of having an additional year of experience. In addition to making for a snappier fun fact, this allows us to make predictions about salaries that we don't know.</p>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Paid Accounts</h2>
                    <p>When you get back to your desk, the VP of Revenue is waiting for you. She wants to better understand which users pay for accounts and which don't. (She knows their names, but that's not particularly actionable information.)</p>
                    
                    <p>You notice that there seems to be a correspondence between years of experience and paid accounts:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Paid Account Analysis</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Paid account data
paid_accounts = [
    (0.7, "paid"),
    (1.9, "unpaid"),
    (2.5, "paid"),
    (4.2, "unpaid"),
    (6.0, "unpaid"),
    (6.5, "unpaid"),
    (7.5, "unpaid"),
    (8.1, "unpaid"),
    (8.7, "paid"),
    (10.0, "paid")
]

print("Years of experience vs paid account status:")
for years, status in paid_accounts:
    print(f"{years} years: {status}")

# Create a simple prediction model
def predict_paid_or_unpaid(years_experience):
    if years_experience < 3.0:
        return "paid"
    elif years_experience < 8.5:
        return "unpaid"
    else:
        return "paid"

print("\nPredictions for different experience levels:")
test_years = [1.0, 2.5, 4.0, 6.0, 9.0]
for years in test_years:
    prediction = predict_paid_or_unpaid(years)
    print(f"{years} years: predicted {prediction}")

# Calculate accuracy of our model
correct = 0
total = len(paid_accounts)
for years, actual in paid_accounts:
    predicted = predict_paid_or_unpaid(years)
    if predicted == actual:
        correct += 1

accuracy = (correct / total) * 100
print(f"\nModel accuracy: {accuracy:.1f}% ({correct}/{total} correct)")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Paid Accounts by Experience</div>
                        <div class="chart-container">
                            <canvas id="paidAccountsChart"></canvas>
                        </div>
                    </div>
                    
                    <p>Users with very few and very many years of experience tend to pay; users with average amounts of experience don't.</p>
                    
                    <div class="info-box note">
                        <div class="info-box-title"><i class="fas fa-info-circle"></i> Note</div>
                        <p>Of course, we totally eyeballed the cutoffs. With more data (and more mathematics), we could build a model predicting the likelihood that a user would pay, based on his years of experience.</p>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Topics of Interest</h2>
                    <p>As you're wrapping up your first day, the VP of Content Strategy asks you for data about what topics users are most interested in, so that she can plan out her blog calendar accordingly. You already have the raw data from the friend-suggester project:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Interest Analysis</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">interests = [
    (0, "Hadoop"), (0, "Big Data"), (0, "HBase"), (0, "Java"),
    (0, "Spark"), (0, "Storm"), (0, "Cassandra"),
    (1, "NoSQL"), (1, "MongoDB"), (1, "Cassandra"), (1, "HBase"),
    (1, "Postgres"), (2, "Python"), (2, "scikit-learn"), (2, "scipy"),
    (2, "numpy"), (2, "statsmodels"), (2, "pandas"), (3, "R"), (3, "Python"),
    (3, "statistics"), (3, "regression"), (3, "probability"),
    (4, "machine learning"), (4, "regression"), (4, "decision trees"),
    (4, "libsvm"), (5, "Python"), (5, "R"), (5, "Java"), (5, "C++"),
    (5, "Haskell"), (5, "programming languages"), (6, "statistics"),
    (6, "probability"), (6, "mathematics"), (6, "theory"),
    (7, "machine learning"), (7, "scikit-learn"), (7, "Mahout"),
    (7, "neural networks"), (8, "neural networks"), (8, "deep learning"),
    (8, "Big Data"), (8, "artificial intelligence"), (9, "Hadoop"),
    (9, "Java"), (9, "MapReduce"), (9, "Big Data")
]

# Count words in interests
from collections import Counter

words_and_counts = Counter(word
                          for user, interest in interests
                          for word in interest.lower().split())

print("Most common words in interests (appearing more than once):")
for word, count in words_and_counts.most_common():
    if count > 1:
        print(f"{word}: {count}")

# Count full interests
interest_counts = Counter(interest for user, interest in interests)

print("\nMost popular interests:")
for interest, count in interest_counts.most_common(10):
    print(f"{interest}: {count} users")

# Find users with most interests
user_interest_counts = Counter(user for user, interest in interests)

print("\nUsers with most interests:")
for user_id, count in user_interest_counts.most_common():
    user_name = next(u for u in users if u["id"] == user_id)["name"]
    print(f"{user_name}: {count} interests")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Most Popular Topics</div>
                        <div class="chart-container">
                            <canvas id="topicsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="viz-container">
                        <div class="viz-title">Word Cloud of Interests</div>
                        <div class="chart-container">
                            <canvas id="wordCloudChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Onward</h2>
                    <p>It's been a successful first day! Exhausted, you slip out of the building before anyone else can ask you for anything else. Get a good night's rest, because tomorrow is new employee orientation. (Yes, you went through a full day of work before new employee orientation. Take it up with HR.)</p>
                    
                    <div class="info-box tip">
                        <div class="info-box-title"><i class="fas fa-lightbulb"></i> What's Next?</div>
                        <p>In the following chapters, we'll dive deeper into each of these topics, building the tools and techniques you need to become a proficient data scientist. We'll start with a Python crash course, then move through statistics, probability, machine learning, and more.</p>
                    </div>
                </div>
            </section>

            <!-- Python Crash Course Section -->
            <section class="content-section" id="python-crash">
                <div class="section-header">
                    <h1>A Crash Course in Python</h1>
                    <p>Master the Python fundamentals you'll need for data science. This chapter covers the essential Python concepts and features that will be used throughout the book.</p>
                </div>

                <div class="content-block">
                    <h2>The Basics</h2>
                    <p>Python is a versatile, high-level programming language that's perfect for data science. It's known for its readability and simplicity, making it an excellent choice for both beginners and experts.</p>
                    
                    <h3>Getting Python</h3>
                    <p>You can download Python from python.org. But if you don't already have Python, I recommend instead installing the Anaconda distribution, which already includes most of the libraries that you need to do data science.</p>
                    
                    <p>As I write this, the latest version of Python is 3.4. At DataSciencester, however, we use old, reliable Python 2.7. Python 3 is not backward-compatible with Python 2, and many important libraries only work well with 2.7. The data science community is still firmly stuck on 2.7, which means we will be, too. Make sure to get that version.</p>
                    
                    <div class="info-box warning">
                        <div class="info-box-title"><i class="fas fa-exclamation-triangle"></i> Note</div>
                        <p>While Python 3 is the future, many data science libraries still work better with Python 2.7. For this book, we'll use Python 2.7 syntax, but most examples will work with minor modifications in Python 3.</p>
                    </div>
                    
                    <h3>The Zen of Python</h3>
                    <p>Python has a somewhat Zen description of its design principles, which you can also find inside the Python interpreter itself by typing <code>import this</code>.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: The Zen of Python</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># The Zen of Python
import this

# This will print the guiding principles of Python design
print("\n--- Key Principles ---")
print("1. Beautiful is better than ugly.")
print("2. Explicit is better than implicit.")
print("3. Simple is better than complex.")
print("4. Complex is better than complicated.")
print("5. Readability counts.")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <p>One of the most discussed of these is:</p>
                    <blockquote><em>There should be one—and preferably only one—obvious way to do it.</em></blockquote>
                    
                    <p>Code written in accordance with this "obvious" way (which may not be obvious at all to a newcomer) is often described as "Pythonic." Although this is not a book about Python, we will occasionally contrast Pythonic and non-Pythonic ways of accomplishing the same things, and we will generally favor Pythonic ones.</p>
                </div>

                <div class="content-block">
                    <h2>Whitespace Formatting</h2>
                    <p>Many languages use curly braces to delimit blocks of code. Python uses indentation:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Whitespace Formatting</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Python uses indentation to define code blocks
# This is a Pythonic way to write a for loop

for i in range(5):
    print("This is inside the loop")
    if i % 2 == 0:
        print(f"{i} is even")
    else:
        print(f"{i} is odd")

print("This is outside the loop")

# Functions also use indentation
def greet(name, loud=False):
    if loud:
        print(f"HELLO, {name.upper()}!")
    else:
        print(f"Hello, {name}")

# Test the function
greet("Bob")
greet("Alice", loud=True)</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                    
                    <p>The whitespace is part of the language. You'll get used to it. The key is to be consistent. Most Python code uses 4 spaces for each indentation level.</p>
                    
                    <div class="info-box tip">
                        <div class="info-box-title"><i class="fas fa-lightbulb"></i> Tip</div>
                        <p>Always use spaces, not tabs, for indentation. Most editors can be configured to insert spaces when you press the Tab key.</p>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Modules</h2>
                    <p>Certain features of Python are not loaded by default. These include both features that are included as part of the language as well as third-party features that you download yourself. To use these features, you need to <code>import</code> the modules that contain them.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Importing Modules</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Different ways to import modules

# 1. Import the entire module
import math
print(f"Pi is approximately {math.pi}")
print(f"Square root of 16 is {math.sqrt(16)}")

# 2. Import specific functions from a module
from math import sqrt, pi
print(f"Pi is approximately {pi}")
print(f"Square root of 25 is {sqrt(25)}")

# 3. Import all functions from a module (use with caution)
from random import *
print(f"Random number between 1 and 10: {randint(1, 10)}")
print(f"Random choice from list: {choice(['apple', 'banana', 'cherry'])}")

# 4. Import with an alias
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

print("\nSuccessfully imported common data science libraries!")
print("numpy as np")
print("pandas as pd") 
print("matplotlib.pyplot as plt")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Arithmetic</h2>
                    <p>Python is a perfectly good calculator:</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Arithmetic Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic arithmetic operations
print("=== Basic Arithmetic ===")
print(f"2 + 2 = {2 + 2}")        # Addition
print(f"7 - 3 = {7 - 3}")        # Subtraction
print(f"3 * 4 = {3 * 4}")        # Multiplication
print(f"10 / 2 = {10 / 2}")      # Division (float)
print(f"10 // 3 = {10 // 3}")    # Integer division
print(f"10 % 3 = {10 % 3}")      # Modulo (remainder)
print(f"2 ** 3 = {2 ** 3}")      # Exponentiation

# Order of operations
print("\n=== Order of Operations ===")
print(f"2 + 3 * 4 = {2 + 3 * 4}")      # Multiplication first
print(f"(2 + 3) * 4 = {(2 + 3) * 4}")  # Parentheses first

# Working with floats
print("\n=== Float Operations ===")
print(f"0.1 + 0.2 = {0.1 + 0.2}")  # Floating point precision
print(f"round(0.1 + 0.2, 2) = {round(0.1 + 0.2, 2)}")

# Using the math module for more advanced operations
import math
print("\n=== Math Module ===")
print(f"sqrt(16) = {math.sqrt(16)}")
print(f"sin(pi/2) = {math.sin(math.pi/2)}")
print(f"log(100) = {math.log(100)}")
print(f"factorial(5) = {math.factorial(5)}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Functions</h2>
                    <p>Functions are the building blocks of Python programs. They allow you to reuse code and make your programs more modular and readable.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Defining Functions</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic function definition
def greet(name):
    """This is a docstring. It explains what the function does."""
    return f"Hello, {name}!"

# Calling the function
print(greet("World"))
print(greet("Data Scientist"))

# Function with multiple parameters
def power(base, exponent):
    """Calculate base raised to the power of exponent."""
    return base ** exponent

print(f"\n2^3 = {power(2, 3)}")
print(f"5^2 = {power(5, 2)}")

# Function with default parameter
def greet_with_title(name, title="Mr./Ms."):
    """Greet someone with a title."""
    return f"Hello, {title} {name}!"

print(f"\n{greet_with_title('Smith')}")
print(f"{greet_with_title('Johnson', 'Dr.')}")

# Function with variable number of arguments
def sum_all(*args):
    """Sum all arguments passed to the function."""
    return sum(args)

print(f"\nSum of 1, 2, 3, 4, 5 = {sum_all(1, 2, 3, 4, 5)}")
print(f"Sum of 10, 20, 30 = {sum_all(10, 20, 30)}")

# Function with keyword arguments
def describe_person(name, **kwargs):
    """Describe a person with various attributes."""
    description = f"{name} is"
    for key, value in kwargs.items():
        description += f" {key} {value},"
    return description.rstrip(',')

print(f"\n{describe_person('Alice', age=30, height='5\\'6\\"', occupation='engineer')}")

# Lambda functions (anonymous functions)
square = lambda x: x ** 2
print(f"\nSquare of 5 using lambda: {square(5)}")

# Functions as first-class objects
def apply_operation(func, value):
    """Apply a function to a value."""
    return func(value)

print(f"Apply square to 4: {apply_operation(square, 4)}")
print(f"Apply lambda x: x*3 to 5: {apply_operation(lambda x: x*3, 5)}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Strings</h2>
                    <p>Strings are used to represent text. Python has powerful string manipulation capabilities.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: String Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Creating strings
single_quote = 'Hello, World!'
double_quote = "Hello, World!"
multiline = """This is a
multiline string."""

print("=== Creating Strings ===")
print(single_quote)
print(double_quote)
print(multiline)

# String concatenation
print("\n=== String Concatenation ===")
first_name = "John"
last_name = "Doe"
full_name = first_name + " " + last_name
print(f"Full name: {full_name}")

# String formatting
print("\n=== String Formatting ===")
age = 30
# Old style
print("My name is %s and I'm %d years old." % (full_name, age))
# str.format()
print("My name is {} and I'm {} years old.".format(full_name, age))
# f-strings (Python 3.6+, also works in modern Python 2.7 with __future__)
print("My name is {} and I'm {} years old.".format(full_name, age))

# String methods
print("\n=== String Methods ===")
text = "  Data Science is Awesome!  "
print(f"Original: '{text}'")
print(f"Strip: '{text.strip()}'")
print(f"Upper: '{text.upper()}'")
print(f"Lower: '{text.lower()}'")
print(f"Replace: '{text.replace('Awesome', 'Amazing')}'")
print(f"Split: {text.split()}")
print(f"Join: '-'.join(['Data', 'Science', 'Rocks'])")

# String indexing and slicing
print("\n=== String Indexing and Slicing ===")
sentence = "Data Science"
print(f"First character: {sentence[0]}")
print(f"Last character: {sentence[-1]}")
print(f"First word: {sentence[:4]}")
print(f"Last word: {sentence[5:]}")
print(f"Every other character: {sentence[::2]}")

# Checking string properties
print("\n=== String Properties ===")
print(f"'123'.isdigit(): {'123'.isdigit()}")
print(f"'abc'.isalpha(): {'abc'.isalpha()}")
print(f"'abc123'.isalnum(): {'abc123'.isalnum()}")
print(f"'hello'.startswith('he'): {'hello'.startswith('he')}")
print(f"'world'.endswith('ld'): {'world'.endswith('ld')}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Exceptions</h2>
                    <p>Sometimes things go wrong. Python uses exceptions to handle errors gracefully.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Exception Handling</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic exception handling
print("=== Basic Exception Handling ===")
try:
    result = 10 / 0
except ZeroDivisionError:
    print("Cannot divide by zero!")

# Handling multiple exceptions
print("\n=== Multiple Exceptions ===")
def safe_divide(a, b):
    try:
        return a / b
    except ZeroDivisionError:
        return "Error: Division by zero"
    except TypeError:
        return "Error: Invalid types"
    except Exception as e:
        return f"Unexpected error: {e}"

print(safe_divide(10, 2))
print(safe_divide(10, 0))
print(safe_divide(10, "a"))

# Finally block
print("\n=== Finally Block ===")
def file_operations():
    try:
        print("Opening file...")
        # Simulate file operations
        print("Reading from file...")
        # Simulate an error
        raise ValueError("File corrupted!")
    except ValueError as e:
        print(f"Error: {e}")
    finally:
        print("Closing file...")  # This always runs

file_operations()

# Raising exceptions
print("\n=== Raising Exceptions ===")
def validate_age(age):
    if age < 0:
        raise ValueError("Age cannot be negative!")
    if age > 120:
        raise ValueError("Age seems unrealistic!")
    return f"Age {age} is valid"

try:
    print(validate_age(25))
    print(validate_age(-5))
except ValueError as e:
    print(f"Validation error: {e}")

# Custom exceptions
print("\n=== Custom Exceptions ===")
class DataValidationError(Exception):
    """Custom exception for data validation errors."""
    pass

def validate_email(email):
    if "@" not in email:
        raise DataValidationError(f"Invalid email: {email}")
    return f"Email {email} is valid"

try:
    print(validate_email("user@example.com"))
    print(validate_email("invalid-email"))
except DataValidationError as e:
    print(f"Data validation failed: {e}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Lists</h2>
                    <p>Lists are the most versatile data structure in Python. They can hold any type of data and are mutable.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: List Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Creating lists
print("=== Creating Lists ===")
empty_list = []
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", 3.14, True]
nested = [[1, 2], [3, 4], [5, 6]]

print(f"Empty list: {empty_list}")
print(f"Numbers: {numbers}")
print(f"Mixed: {mixed}")
print(f"Nested: {nested}")

# List indexing and slicing
print("\n=== Indexing and Slicing ===")
print(f"First element: {numbers[0]}")
print(f"Last element: {numbers[-1]}")
print(f"First three: {numbers[:3]}")
print(f"Last three: {numbers[-3:]}")
print(f"Every other: {numbers[::2]}")

# Modifying lists
print("\n=== Modifying Lists ===")
numbers[0] = 10
print(f"After modifying first element: {numbers}")
numbers.append(6)
print(f"After append: {numbers}")
numbers.insert(2, 99)
print(f"After insert: {numbers}")
numbers.remove(99)
print(f"After remove: {numbers}")
popped = numbers.pop()
print(f"Popped element: {popped}")
print(f"After pop: {numbers}")

# List operations
print("\n=== List Operations ===")
more_numbers = [6, 7, 8]
combined = numbers + more_numbers
print(f"Combined lists: {combined}")
repeated = numbers * 2
print(f"Repeated list: {repeated}")

# List methods
print("\n=== List Methods ===")
letters = ['b', 'c', 'a', 'd', 'a']
print(f"Original: {letters}")
letters.sort()
print(f"After sort: {letters}")
letters.reverse()
print(f"After reverse: {letters}")
print(f"Count of 'a': {letters.count('a')}")
print(f"Index of 'd': {letters.index('d')}")

# List comprehensions
print("\n=== List Comprehensions ===")
squares = [x**2 for x in range(10)]
print(f"Squares: {squares}")

evens = [x for x in range(20) if x % 2 == 0]
print(f"Even numbers: {evens}")

words = ["hello", "world", "python", "data"]
lengths = [len(word) for word in words]
print(f"Word lengths: {lengths}")

# Nested list comprehensions
matrix = [[i*j for j in range(3)] for i in range(3)]
print(f"Multiplication table: {matrix}")

# Common list patterns
print("\n=== Common List Patterns ===")
# Flatten a nested list
nested_list = [[1, 2], [3, 4], [5, 6]]
flattened = [item for sublist in nested_list for item in sublist]
print(f"Flattened: {flattened}")

# Remove duplicates while preserving order
with_duplicates = [1, 2, 2, 3, 1, 4, 5, 3]
unique = []
seen = set()
for item in with_duplicates:
    if item not in seen:
        unique.append(item)
        seen.add(item)
print(f"Unique items: {unique}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Tuples</h2>
                    <p>Tuples are like lists but are immutable. Once created, they cannot be modified.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Tuple Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Creating tuples
print("=== Creating Tuples ===")
empty_tuple = ()
single_element = (1,)  # Note the comma!
point = (3, 4)
rgb = (255, 0, 128)
mixed = (1, "hello", 3.14)

print(f"Empty: {empty_tuple}")
print(f"Single element: {single_element}")
print(f"Point: {point}")
print(f"RGB: {rgb}")
print(f"Mixed: {mixed}")

# Tuple unpacking
print("\n=== Tuple Unpacking ===")
x, y = point
print(f"x = {x}, y = {y}")

r, g, b = rgb
print(f"R={r}, G={g}, B={b}")

# Swapping variables
a, b = 5, 10
print(f"Before swap: a={a}, b={b}")
a, b = b, a
print(f"After swap: a={a}, b={b}")

# Tuple operations
print("\n=== Tuple Operations ===")
# Tuples are immutable
try:
    point[0] = 5
except TypeError as e:
    print(f"Error: {e}")

# But you can create new tuples
new_point = (point[0] + 1, point[1] + 1)
print(f"New point: {new_point}")

# Tuple methods
print(f"Index of 4 in point: {point.index(4)}")
print(f"Count of 1 in (1, 2, 1, 3): {(1, 2, 1, 3).count(1)}")

# Named tuples (for better readability)
print("\n=== Named Tuples ===")
from collections import namedtuple

Point = namedtuple('Point', ['x', 'y'])
p1 = Point(10, 20)
p2 = Point(30, 40)

print(f"p1: {p1}")
print(f"x coordinate of p1: {p1.x}")
print(f"y coordinate of p1: {p1.y}")

# Using tuples as dictionary keys
print("\n=== Tuples as Dictionary Keys ===")
locations = {
    (40.7128, -74.0060): "New York",
    (34.0522, -118.2437): "Los Angeles",
    (41.8781, -87.6298): "Chicago"
}

for coords, city in locations.items():
    print(f"{coords}: {city}")

# Returning multiple values from functions
print("\n=== Multiple Return Values ===")
def calculate_stats(numbers):
    """Calculate min, max, and average of a list of numbers."""
    return min(numbers), max(numbers), sum(numbers) / len(numbers)

stats = calculate_stats([1, 5, 3, 9, 2])
print(f"Stats: {stats}")
min_val, max_val, avg = stats
print(f"Min: {min_val}, Max: {max_val}, Avg: {avg:.2f}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Dictionaries</h2>
                    <p>Dictionaries store key-value pairs. They are incredibly useful for organizing and accessing data.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Dictionary Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Creating dictionaries
print("=== Creating Dictionaries ===")
empty_dict = {}
person = {
    "name": "John Doe",
    "age": 30,
    "city": "New York",
    "email": "john@example.com"
}
using_dict_constructor = dict(name="Jane", age=25)

print(f"Empty: {empty_dict}")
print(f"Person: {person}")
print(f"From constructor: {using_dict_constructor}")

# Accessing values
print("\n=== Accessing Values ===")
print(f"Name: {person['name']}")
print(f"Age: {person.get('age', 'Not specified')}")
print(f"Phone: {person.get('phone', 'Not specified')}")

# Modifying dictionaries
print("\n=== Modifying Dictionaries ===")
person["age"] = 31
print(f"After updating age: {person['age']}")

person["phone"] = "555-1234"
print(f"After adding phone: {person['phone']}")

del person["email"]
print(f"After deleting email: {person}")

# Dictionary methods
print("\n=== Dictionary Methods ===")
print(f"Keys: {list(person.keys())}")
print(f"Values: {list(person.values())}")
print(f"Items: {list(person.items())}")

# Checking for keys
print(f"\nHas 'name' key: {'name' in person}")
print(f"Has 'email' key: {'email' in person}")

# Iterating over dictionaries
print("\n=== Iterating ===")
print("Keys:")
for key in person:
    print(f"  {key}")

print("\nValues:")
for value in person.values():
    print(f"  {value}")

print("\nKey-Value pairs:")
for key, value in person.items():
    print(f"  {key}: {value}")

# Dictionary comprehensions
print("\n=== Dictionary Comprehensions ===")
squares = {x: x**2 for x in range(5)}
print(f"Squares: {squares}")

word_lengths = {word: len(word) for word in ["hello", "world", "python"]}
print(f"Word lengths: {word_lengths}")

# Nested dictionaries
print("\n=== Nested Dictionaries ===")
employees = {
    "emp1": {
        "name": "Alice",
        "department": "Engineering",
        "skills": ["Python", "JavaScript", "SQL"]
    },
    "emp2": {
        "name": "Bob",
        "department": "Marketing",
        "skills": ["SEO", "Analytics", "Content"]
    }
}

print("Employee details:")
for emp_id, details in employees.items():
    print(f"{emp_id}:")
    for key, value in details.items():
        print(f"  {key}: {value}")

# Merging dictionaries (Python 3.5+)
print("\n=== Merging Dictionaries ===")
dict1 = {"a": 1, "b": 2}
dict2 = {"c": 3, "d": 4}
merged = {**dict1, **dict2}
print(f"Merged: {merged}")

# Default dictionaries
print("\n=== Default Dictionary ===")
from collections import defaultdict

word_count = defaultdict(int)
text = "hello world hello python world data science"
for word in text.split():
    word_count[word] += 1

print("Word counts:")
for word, count in word_count.items():
    print(f"  {word}: {count}")

# Counter
print("\n=== Counter ===")
from collections import Counter
letters = Counter("mississippi")
print(f"Letter counts: {dict(letters)}")
print(f"Most common: {letters.most_common(2)}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Sets</h2>
                    <p>Sets are unordered collections of unique elements. They are useful for mathematical operations like union, intersection, and difference.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Set Operations</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Creating sets
print("=== Creating Sets ===")
empty_set = set()
numbers = {1, 2, 3, 4, 5}
from_list = set([1, 2, 2, 3, 3, 4])  # Duplicates are removed
string_set = set("hello")

print(f"Empty: {empty_set}")
print(f"Numbers: {numbers}")
print(f"From list (duplicates removed): {from_list}")
print(f"From string: {string_set}")

# Set operations
print("\n=== Set Operations ===")
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

print(f"Set 1: {set1}")
print(f"Set 2: {set2}")
print(f"Union: {set1 | set2}")
print(f"Intersection: {set1 & set2}")
print(f"Difference (set1 - set2): {set1 - set2}")
print(f"Symmetric difference: {set1 ^ set2}")

# Set methods
print("\n=== Set Methods ===")
numbers.add(6)
print(f"After add(6): {numbers}")
numbers.update([7, 8, 9])
print(f"After update([7, 8, 9]): {numbers}")
numbers.remove(1)
print(f"After remove(1): {numbers}")
numbers.discard(10)  # Doesn't raise error if element doesn't exist
print(f"After discard(10): {numbers}")

# Checking membership
print(f"\n2 in numbers: {2 in numbers}")
print(f"10 in numbers: {10 in numbers}")

# Set comprehensions
print("\n=== Set Comprehensions ===")
squares = {x**2 for x in range(10)}
print(f"Squares: {squares}")

even_squares = {x**2 for x in range(10) if x % 2 == 0}
print(f"Even squares: {even_squares}")

# Practical examples
print("\n=== Practical Examples ===")
# Finding unique words in a text
text = "data science is fun and data science is useful"
unique_words = set(text.split())
print(f"Unique words: {unique_words}")

# Finding common elements between two lists
list1 = [1, 2, 3, 4, 5, 5]
list2 = [4, 5, 6, 7, 8, 8]
common = set(list1) & set(list2)
print(f"Common elements: {common}")

# Removing duplicates from a list while preserving order
def remove_duplicates(seq):
    seen = set()
    result = []
    for item in seq:
        if item not in seen:
            seen.add(item)
            result.append(item)
    return result

with_duplicates = [1, 2, 2, 3, 1, 4, 5, 3]
without_duplicates = remove_duplicates(with_duplicates)
print(f"Without duplicates: {without_duplicates}")

# Frozen sets (immutable sets)
print("\n=== Frozen Sets ===")
frozen = frozenset([1, 2, 3])
print(f"Frozen set: {frozen}")
try:
    frozen.add(4)
except AttributeError as e:
    print(f"Error: {e}")

# Frozen sets can be used as dictionary keys
cache = {
    frozenset([1, 2, 3]): "triangle",
    frozenset([4, 5, 6, 7]): "quadrilateral"
}
print(f"Cache: {cache}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Control Flow</h2>
                    <p>Control flow statements allow you to control the order in which your code is executed.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Control Flow</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># If statements
print("=== If Statements ===")
age = 25
if age < 18:
    print("Minor")
elif age < 65:
    print("Adult")
else:
    print("Senior")

# Nested if statements
score = 85
if score >= 90:
    grade = 'A'
elif score >= 80:
    grade = 'B'
elif score >= 70:
    grade = 'C'
elif score >= 60:
    grade = 'D'
else:
    grade = 'F'
print(f"Score: {score}, Grade: {grade}")

# For loops
print("\n=== For Loops ===")
print("Numbers 1 to 5:")
for i in range(1, 6):
    print(i)

print("\nIterating over a list:")
fruits = ["apple", "banana", "cherry"]
for fruit in fruits:
    print(f"I like {fruit}")

print("\nIterating with index:")
for i, fruit in enumerate(fruits):
    print(f"{i}: {fruit}")

print("\nIterating over dictionary:")
person = {"name": "Alice", "age": 30, "city": "New York"}
for key, value in person.items():
    print(f"{key}: {value}")

# While loops
print("\n=== While Loops ===")
count = 0
while count < 5:
    print(f"Count: {count}")
    count += 1

print("\nGuessing game example:")
import random
secret = random.randint(1, 10)
guess = 0
attempts = 0
while guess != secret and attempts < 3:
    guess = random.randint(1, 10)
    attempts += 1
    print(f"Attempt {attempts}: Guessed {guess}")
if guess == secret:
    print(f"Guessed it! The number was {secret}")
else:
    print(f"Didn't guess it. The number was {secret}")

# Break and continue
print("\n=== Break and Continue ===")
print("Finding first even number:")
for num in range(1, 11):
    if num % 2 == 0:
        print(f"First even number: {num}")
        break

print("\nSkipping odd numbers:")
for num in range(1, 11):
    if num % 2 != 0:
        continue
    print(num)

# Try-except with control flow
print("\n=== Exception Handling in Loops ===")
numbers = [10, 0, 5, 0, 2]
for i, num in enumerate(numbers):
    try:
        result = 100 / num
        print(f"100 / {num} = {result}")
    except ZeroDivisionError:
        print(f"Cannot divide by zero at index {i}")

# List comprehension with condition
print("\n=== List Comprehension with Condition ===")
numbers = list(range(1, 21))
evens = [x for x in numbers if x % 2 == 0]
print(f"Even numbers: {evens}")

squares_of_evens = [x**2 for x in numbers if x % 2 == 0]
print(f"Squares of evens: {squares_of_evens}")

# Pass statement (placeholder)
print("\n=== Pass Statement ===")
def placeholder_function():
    pass  # TODO: implement this function

class PlaceholderClass:
    pass  # TODO: implement this class

print("Pass statements used as placeholders")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>Truthiness</h2>
                    <p>In Python, many objects can be evaluated in a boolean context. Understanding truthiness is important for writing clean, Pythonic code.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Truthiness</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Truthy and falsy values
print("=== Truthy and Falsy Values ===")
print(f"bool(0): {bool(0)}")
print(f"bool(1): {bool(1)}")
print(f"bool(-1): {bool(-1)}")
print(f"bool(0.0): {bool(0.0)}")
print(f"bool(0.1): {bool(0.1)}")
print(f"bool(''): {bool('')}")
print(f"bool('hello'): {bool('hello')}")
print(f"bool([]): {bool([])}")
print(f"bool([1, 2]): {bool([1, 2])}")
print(f"bool({}): {bool({})}")
print(f"bool({1: 2}): {bool({1: 2})}")
print(f"bool(None): {bool(None)}")

# Using truthiness in conditions
print("\n=== Using Truthiness ===")
def check_value(value):
    if value:
        print(f"'{value}' is truthy")
    else:
        print(f"'{value}' is falsy")

check_value(0)
check_value(42)
check_value("")
check_value("hello")
check_value([])
check_value([1, 2])
check_value(None)

# Short-circuit evaluation
print("\n=== Short-circuit Evaluation ===")
def expensive_function():
    print("Expensive function called!")
    return True

# and operator - stops at first falsy value
print("Testing 'and' operator:")
result = False and expensive_function()
print(f"Result: {result}")

result = True and expensive_function()
print(f"Result: {result}")

# or operator - stops at first truthy value
print("\nTesting 'or' operator:")
result = True or expensive_function()
print(f"Result: {result}")

result = False or expensive_function()
print(f"Result: {result}")

# Practical examples
print("\n=== Practical Examples ===")
# Default values
name = ""
display_name = name or "Anonymous"
print(f"Display name: {display_name}")

# Safe dictionary access
person = {"name": "Alice"}
city = person.get("city") or "Unknown"
print(f"City: {city}")

# Filtering lists
numbers = [0, 1, 2, 0, 3, 0, 4]
non_zero = [x for x in numbers if x]
print(f"Non-zero numbers: {non_zero}")

# Combining conditions
def is_valid_user(user):
    """Check if a user is valid (has name and email)."""
    return user.get("name") and user.get("email")

user1 = {"name": "John", "email": "john@example.com"}
user2 = {"name": "", "email": "jane@example.com"}
user3 = {"name": "Bob"}

print(f"\nUser1 valid: {is_valid_user(user1)}")
print(f"User2 valid: {is_valid_user(user2)}")
print(f"User3 valid: {is_valid_user(user3)}")

# The ternary conditional operator
print("\n=== Ternary Operator ===")
age = 20
status = "Adult" if age >= 18 else "Minor"
print(f"Age {age}: {status}")

# Nested ternary
score = 75
grade = (
    "A" if score >= 90 else
    "B" if score >= 80 else
    "C" if score >= 70 else
    "D" if score >= 60 else
    "F"
)
print(f"Score {score}: Grade {grade}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h2>The Not-So-Basics</h2>
                    <p>Now let's explore some more advanced Python features that are particularly useful for data science.</p>
                    
                    <h3>Sorting</h3>
                    <p>Python provides powerful sorting capabilities.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Advanced Sorting</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic sorting
print("=== Basic Sorting ===")
numbers = [5, 2, 9, 1, 5, 6]
print(f"Original: {numbers}")
print(f"Sorted: {sorted(numbers)}")
print(f"Original unchanged: {numbers}")

# In-place sorting
numbers.sort()
print(f"After sort(): {numbers}")

# Sorting in reverse
numbers = [5, 2, 9, 1, 5, 6]
print(f"\nReverse sort: {sorted(numbers, reverse=True)}")

# Sorting complex objects
print("\n=== Sorting Complex Objects ===")
people = [
    {"name": "Alice", "age": 30, "salary": 70000},
    {"name": "Bob", "age": 25, "salary": 50000},
    {"name": "Charlie", "age": 35, "salary": 90000},
    {"name": "Diana", "age": 28, "salary": 60000}
]

# Sort by age
by_age = sorted(people, key=lambda x: x["age"])
print("Sorted by age:")
for person in by_age:
    print(f"  {person['name']}: {person['age']}")

# Sort by salary (descending)
by_salary = sorted(people, key=lambda x: x["salary"], reverse=True)
print("\nSorted by salary (descending):")
for person in by_salary:
    print(f"  {person['name']}: ${person['salary']:,}")

# Sort by multiple criteria
# First by age, then by salary
by_multiple = sorted(people, key=lambda x: (x["age"], -x["salary"]))
print("\nSorted by age, then salary (descending):")
for person in by_multiple:
    print(f"  {person['name']}: Age {person['age']}, Salary ${person['salary']:,}")

# Using operator.itemgetter for better performance
from operator import itemgetter
by_name = sorted(people, key=itemgetter("name"))
print("\nSorted by name (using itemgetter):")
for person in by_name:
    print(f"  {person['name']}")

# Sorting strings
print("\n=== Sorting Strings ===")
words = ["banana", "Apple", "cherry", "date", "Elderberry"]
print(f"Original: {words}")
print(f"Case-sensitive sort: {sorted(words)}")
print(f"Case-insensitive sort: {sorted(words, key=str.lower)}")

# Sorting by length
print(f"By length: {sorted(words, key=len)}")

# Custom sorting with a function
print("\n=== Custom Sorting ===")
def sort_key(item):
    """Custom sort key for complex objects."""
    # Sort by name length, then alphabetically
    return (len(item["name"]), item["name"])

custom_sorted = sorted(people, key=sort_key)
print("Custom sorted (by name length, then alphabetically):")
for person in custom_sorted:
    print(f"  {person['name']} (length: {len(person['name'])})")

# Stable sorting
print("\n=== Stable Sorting ===")
data = [
    ("Alice", "A"),
    ("Bob", "B"),
    ("Alice", "B"),
    ("Charlie", "A"),
    ("Bob", "A")
]

# First sort by second element
data.sort(key=lambda x: x[1])
print("After sorting by second element:")
for item in data:
    print(f"  {item}")

# Then sort by first element (stable sort preserves order of equal elements)
data.sort(key=lambda x: x[0])
print("\nAfter stable sort by first element:")
for item in data:
    print(f"  {item}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>List Comprehensions</h3>
                    <p>List comprehensions are a concise way to create lists. They're very Pythonic and often more readable than traditional loops.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: List Comprehensions</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic list comprehension
print("=== Basic List Comprehension ===")
squares = [x**2 for x in range(10)]
print(f"Squares: {squares}")

# Equivalent using for loop
squares_loop = []
for x in range(10):
    squares_loop.append(x**2)
print(f"Using for loop: {squares_loop}")

# With condition
print("\n=== With Condition ===")
evens = [x for x in range(20) if x % 2 == 0]
print(f"Even numbers: {evens}")

# Multiple conditions
numbers = [x for x in range(100) if x % 2 == 0 and x % 3 == 0]
print(f"Divisible by 2 and 3: {numbers}")

# Nested list comprehensions
print("\n=== Nested List Comprehensions ===")
matrix = [[i*j for j in range(3)] for i in range(3)]
print(f"Multiplication table: {matrix}")

# Flatten a matrix
flattened = [item for row in matrix for item in row]
print(f"Flattened: {flattened}")

# More complex example
print("\n=== Complex Examples ===")
# Process words in a sentence
sentence = "The quick brown fox jumps over the lazy dog"
words = sentence.split()
word_info = [(word.upper(), len(word)) for word in words if len(word) > 3]
print(f"Words longer than 3 chars: {word_info}")

# Working with dictionaries
people = {"Alice": 30, "Bob": 25, "Charlie": 35}
# Create a list of (name, age) tuples for people over 28
over_28 = [(name, age) for name, age in people.items() if age > 28]
print(f"People over 28: {over_28}")

# List comprehension with function calls
import math
circle_areas = [math.pi * r**2 for r in range(1, 6)]
print(f"Circle areas (r=1 to 5): {[round(area, 2) for area in circle_areas]}")

# Conditional expression in list comprehension
print("\n=== Conditional Expression ===")
numbers = list(range(10))
even_odd = ["even" if x % 2 == 0 else "odd" for x in numbers]
print(f"Even/Odd: {even_odd}")

grades = [85, 92, 78, 65, 95, 88]
letter_grades = [
    "A" if grade >= 90 else
    "B" if grade >= 80 else
    "C" if grade >= 70 else
    "D" if grade >= 60 else
    "F"
    for grade in grades
]
print(f"Letter grades: {letter_grades}")

# Performance comparison
print("\n=== Performance Comparison ===")
import time

# Large list
large_range = range(1000000)

# Method 1: List comprehension
start = time.time()
squares_comp = [x**2 for x in large_range]
comp_time = time.time() - start

# Method 2: For loop with append
start = time.time()
squares_loop = []
for x in large_range:
    squares_loop.append(x**2)
loop_time = time.time() - start

# Method 3: Map function
start = time.time()
squares_map = list(map(lambda x: x**2, large_range))
map_time = time.time() - start

print(f"List comprehension: {comp_time:.4f} seconds")
print(f"For loop: {loop_time:.4f} seconds")
print(f"Map function: {map_time:.4f} seconds")
print(f"List comprehension is {loop_time/comp_time:.1f}x faster than for loop")

# Generator expressions (memory efficient)
print("\n=== Generator Expressions ===")
# List comprehension (creates full list in memory)
squares_list = [x**2 for x in range(1000000)]
print(f"List comprehension memory: ~{len(squares_list) * 8 / 1024 / 1024:.1f} MB")

# Generator expression (creates items on demand)
squares_gen = (x**2 for x in range(1000000))
print(f"Generator expression memory: ~{24} bytes (constant)")

# Using generator with sum
total = sum(x**2 for x in range(1000000))
print(f"Sum of squares: {total}")

# Set and dict comprehensions
print("\n=== Set and Dict Comprehensions ===")
# Set comprehension
unique_squares = {x**2 for x in range(10)}
print(f"Unique squares: {unique_squares}")

# Dict comprehension
word_lengths = {word: len(word) for word in ["hello", "world", "python", "data"]}
print(f"Word lengths: {word_lengths}")

# Dict comprehension from two lists
keys = ["name", "age", "city"]
values = ["Alice", 30, "New York"]
person_dict = {k: v for k, v in zip(keys, values)}
print(f"Person dict: {person_dict}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>Generators and Iterators</h3>
                    <p>Generators are a powerful feature for creating iterators. They allow you to generate sequences on the fly, which is memory efficient.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Generators and Iterators</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Generator functions
print("=== Generator Functions ===")
def count_up_to(n):
    """Generator that yields numbers from 1 to n."""
    i = 1
    while i <= n:
        yield i
        i += 1

# Using the generator
counter = count_up_to(5)
print(f"Generator object: {counter}")

print("Values from generator:")
for num in counter:
    print(f"  {num}")

# Fibonacci generator
print("\n=== Fibonacci Generator ===")
def fibonacci():
    """Generate Fibonacci numbers indefinitely."""
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a + b

fib = fibonacci()
print("First 10 Fibonacci numbers:")
for _ in range(10):
    print(f"  {next(fib)}")

# Generator expressions
print("\n=== Generator Expressions ===")
# List comprehension (creates full list)
squares_list = [x**2 for x in range(10)]
print(f"List comprehension: {squares_list}")

# Generator expression (creates generator)
squares_gen = (x**2 for x in range(10))
print(f"Generator expression: {squares_gen}")
print("Values from generator expression:")
for val in squares_gen:
    print(f"  {val}")

# Memory efficiency comparison
print("\n=== Memory Efficiency ===")
import sys

# Large list
large_list = [x for x in range(1000000)]
print(f"Large list size: {sys.getsizeof(large_list)} bytes")

# Large generator
large_gen = (x for x in range(1000000))
print(f"Large generator size: {sys.getsizeof(large_gen)} bytes")

# Chaining generators
print("\n=== Chaining Generators ===")
def numbers():
    """Generate numbers 1-10."""
    for i in range(1, 11):
        yield i

def even_numbers(gen):
    """Filter for even numbers."""
    for num in gen:
        if num % 2 == 0:
            yield num

def squares(gen):
    """Square each number."""
    for num in gen:
        yield num ** 2

# Chain the generators
result = squares(even_numbers(numbers()))
print("Even squares from 1-10:")
for val in result:
    print(f"  {val}")

# Custom iterator class
print("\n=== Custom Iterator ===")
class Countdown:
    """Countdown iterator."""
    def __init__(self, start):
        self.start = start
        self.current = start
    
    def __iter__(self):
        return self
    
    def __next__(self):
        if self.current < 0:
            raise StopIteration
        value = self.current
        self.current -= 1
        return value

countdown = Countdown(5)
print("Countdown from 5:")
for num in countdown:
    print(f"  {num}")

# Practical example: Processing large files
print("\n=== Practical Example: File Processing ===")
def read_large_file(filename):
    """Simulate reading a large file line by line."""
    lines = [
        "Line 1: Data science is amazing",
        "Line 2: Python makes it easy",
        "Line 3: Generators save memory",
        "Line 4: Iterators are powerful",
        "Line 5: Keep learning and growing"
    ]
    for line in lines:
        yield line

# Process the "file"
def process_lines(line_generator):
    """Process lines from a file."""
    word_count = 0
    for line in line_generator:
        words = line.split()
        word_count += len(words)
        print(f"Processing: {line}")
    return word_count

file_gen = read_large_file("large_file.txt")
total_words = process_lines(file_gen)
print(f"\nTotal words processed: {total_words}")

# Generator with send() method
print("\n=== Generator with send() ===")
def accumulator():
    """Accumulator that can be sent values."""
    total = 0
    while True:
        value = yield total
        if value is not None:
            total += value

acc = accumulator()
next(acc)  # Prime the generator
print(f"Initial total: {acc.send(10)}")
print(f"After sending 20: {acc.send(20)}")
print(f"After sending 5: {acc.send(5)}")

# Using generators for data pipelines
print("\n=== Data Pipeline Example ===")
import random

def sensor_data():
    """Simulate sensor data."""
    while True:
        yield random.uniform(0, 100)

def filter_data(data_gen, threshold):
    """Filter data above threshold."""
    for value in data_gen:
        if value > threshold:
            yield value

def process_data(data_gen):
    """Process filtered data."""
    for value in data_gen:
        yield round(value, 2)

# Create pipeline
pipeline = process_data(filter_data(sensor_data(), 50))

print("First 5 values above 50:")
for _ in range(5):
    print(f"  {next(pipeline)}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>Randomness</h3>
                    <p>Random numbers are essential for many data science applications, from simulations to machine learning algorithms.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Randomness</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">import random

# Basic random functions
print("=== Basic Random Functions ===")
print(f"Random float [0, 1): {random.random()}")
print(f"Random integer [1, 10]: {random.randint(1, 10)}")
print(f"Random choice from list: {random.choice(['apple', 'banana', 'cherry'])}")
print(f"Random sample: {random.sample([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 3)}")

# Seeding for reproducibility
print("\n=== Seeding ===")
random.seed(42)
print(f"With seed 42: {random.random()}")
print(f"Next value: {random.random()}")

random.seed(42)
print(f"Reset seed 42: {random.random()}")
print(f"Next value: {random.random()}")

# Generating distributions
print("\n=== Random Distributions ===")
# Uniform distribution
uniform_samples = [random.uniform(0, 10) for _ in range(5)]
print(f"Uniform samples [0, 10]: {[round(x, 2) for x in uniform_samples]}")

# Normal distribution
normal_samples = [random.gauss(0, 1) for _ in range(5)]
print(f"Normal samples (μ=0, σ=1): {[round(x, 2) for x in normal_samples]}")

# Exponential distribution
exp_samples = [random.expovariate(1) for _ in range(5)]
print(f"Exponential samples (λ=1): {[round(x, 2) for x in exp_samples]}")

# Shuffling
print("\n=== Shuffling ===")
deck = list(range(1, 11))
print(f"Original deck: {deck}")
random.shuffle(deck)
print(f"Shuffled deck: {deck}")

# Multiple shuffles
print("\nMultiple shuffles:")
for i in range(3):
    deck_copy = deck.copy()
    random.shuffle(deck_copy)
    print(f"  Shuffle {i+1}: {deck_copy}")

# Weighted random choice
print("\n=== Weighted Choice ===")
choices = ['apple', 'banana', 'cherry', 'date']
weights = [0.1, 0.3, 0.4, 0.2]

# Manual weighted choice
def weighted_choice(choices, weights):
    total = sum(weights)
    r = random.uniform(0, total)
    upto = 0
    for c, w in zip(choices, weights):
        if upto + w >= r:
            return c
        upto += w
    return choices[-1]

print("Weighted random choices:")
for _ in range(10):
    print(f"  {weighted_choice(choices, weights)}")

# Using random.choices (Python 3.6+)
try:
    weighted = random.choices(choices, weights=weights, k=10)
    print(f"Using random.choices: {weighted}")
except AttributeError:
    print("random.choices not available in this Python version")

# Monte Carlo simulation
print("\n=== Monte Carlo Simulation ===")
def estimate_pi(num_samples):
    """Estimate π using Monte Carlo method."""
    inside_circle = 0
    for _ in range(num_samples):
        x = random.uniform(-1, 1)
        y = random.uniform(-1, 1)
        if x**2 + y**2 <= 1:
            inside_circle += 1
    return 4 * inside_circle / num_samples

for samples in [100, 1000, 10000, 100000]:
    pi_estimate = estimate_pi(samples)
    print(f"Samples: {samples:6d}, π estimate: {pi_estimate:.6f}")

# Random walk simulation
print("\n=== Random Walk ===")
def random_walk(steps):
    """Simulate a 1D random walk."""
    position = 0
    positions = [position]
    for _ in range(steps):
        position += random.choice([-1, 1])
        positions.append(position)
    return positions

walk = random_walk(20)
print(f"Random walk positions: {walk}")
print(f"Final position: {walk[-1]}")
print(f"Maximum distance: {max(abs(min(walk)), abs(max(walk)))}")

# Generating random data for testing
print("\n=== Generating Test Data ===")
def generate_person():
    """Generate random person data."""
    names = ["Alice", "Bob", "Charlie", "Diana", "Eve", "Frank", "Grace", "Henry"]
    return {
        "name": random.choice(names),
        "age": random.randint(18, 65),
        "salary": random.randint(30000, 150000),
        "department": random.choice(["Engineering", "Marketing", "Sales", "HR"])
    }

# Generate sample dataset
people = [generate_person() for _ in range(5)]
print("Generated people:")
for person in people:
    print(f"  {person}")

# Permutations and combinations
print("\n=== Permutations and Combinations ===")
import itertools
items = ['A', 'B', 'C']
print(f"Original: {items}")

# All permutations
permutations = list(itertools.permutations(items))
print(f"Permutations: {list(permutations)}")

# All combinations
combinations = list(itertools.combinations(items, 2))
print(f"Combinations (2): {list(combinations)}")

# Random permutation
random_permutation = random.sample(items, len(items))
print(f"Random permutation: {random_permutation}")

# Bootstrap sampling
print("\n=== Bootstrap Sampling ===")
data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
print(f"Original data: {data}")

def bootstrap_sample(data):
    """Create a bootstrap sample."""
    return [random.choice(data) for _ in range(len(data))]

print("Bootstrap samples:")
for i in range(3):
    sample = bootstrap_sample(data)
    print(f"  Sample {i+1}: {sorted(sample)}")

# Simulating dice rolls
print("\n=== Dice Simulation ===")
def roll_dice(num_dice, sides=6):
    """Roll dice and return results."""
    return [random.randint(1, sides) for _ in range(num_dice)]

# Simulate many rolls
rolls = [sum(roll_dice(2)) for _ in range(10000)]

# Count frequencies
from collections import Counter
freq = Counter(rolls)
print("Distribution of sum of 2 dice (10000 rolls):")
for total in sorted(freq):
    print(f"  {total}: {freq[total]:4d} ({freq[total]/100:.1f}%)")

# Cryptographically secure random
print("\n=== Secure Random ===")
import secrets
print(f"Secure random token: {secrets.token_hex(16)}")
print(f"Secure random choice: {secrets.choice(['apple', 'banana', 'cherry'])}")
print(f"Secure random bits: {secrets.randbits(32)}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>Regular Expressions</h3>
                    <p>Regular expressions are powerful tools for pattern matching in text. They're essential for data cleaning and text processing.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Regular Expressions</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python">import re

# Basic pattern matching
print("=== Basic Pattern Matching ===")
text = "The quick brown fox jumps over the lazy dog"
pattern = r"fox"

if re.search(pattern, text):
    print(f"Found '{pattern}' in the text")
else:
    print(f"Pattern '{pattern}' not found")

# Finding all matches
print("\n=== Finding All Matches ===")
text = "Email me at user@example.com or admin@test.org"
email_pattern = r"\w+@\w+\.\w+"
emails = re.findall(email_pattern, text)
print(f"Found emails: {emails}")

# Splitting text
print("\n=== Splitting Text ===")
text = "apple,banana;cherry date|elderberry"
# Split on comma, semicolon, or pipe
fruits = re.split(r"[;,|]", text)
print(f"Split fruits: {fruits}")

# Substituting text
print("\n=== Substitution ===")
text = "The price is $100. The discount is 20%."
# Replace all numbers with words
new_text = re.sub(r"\d+", lambda m: f"[{len(m.group())} digits]", text)
print(f"Original: {text}")
print(f"After substitution: {new_text}")

# Groups in patterns
print("\n=== Groups ===")
text = "John: 25 years old, Jane: 30 years old"
pattern = r"(\w+): (\d+) years old"
matches = re.findall(pattern, text)
print(f"Name-Age pairs: {matches}")

# Named groups
pattern_named = r"(?P<name>\w+): (?P<age>\d+) years old"
for match in re.finditer(pattern_named, text):
    print(f"Name: {match.group('name')}, Age: {match.group('age')}")

# Common patterns
print("\n=== Common Patterns ===")
# Phone numbers
phone_text = "Call me at 555-1234 or (555) 567-8901"
phone_pattern = r"(\(?\d{3}\)?[-.\s]?)?\d{3}[-.\s]?\d{4}"
phones = re.findall(phone_pattern, phone_text)
print(f"Phone numbers found: {phones}")

# URLs
url_text = "Visit https://www.example.com or http://test.org"
url_pattern = r"https?://[^\s]+"
urls = re.findall(url_pattern, url_text)
print(f"URLs found: {urls}")

# Dates
date_text = "Today is 2023-12-25, tomorrow is 12/26/2023"
date_pattern = r"\d{4}-\d{2}-\d{2}|\d{2}/\d{2}/\d{4}"
dates = re.findall(date_pattern, date_text)
print(f"Dates found: {dates}")

# Validation functions
print("\n=== Validation Functions ===")
def is_valid_email(email):
    """Validate email format."""
    pattern = r"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
    return bool(re.match(pattern, email))

emails_to_test = [
    "user@example.com",
    "invalid.email",
    "user@domain",
    "user@domain.co.uk",
    "user+tag@example.org"
]

for email in emails_to_test:
    print(f"{email:25} -> {'Valid' if is_valid_email(email) else 'Invalid'}")

def is_valid_password(password):
    """Validate password strength."""
    # At least 8 chars, one uppercase, one lowercase, one digit, one special
    pattern = r"^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
    return bool(re.match(pattern, password))

passwords_to_test = [
    "password",
    "Password123",
    "Pass123!",
    "StrongPass123!",
    "Weak1"
]

for password in passwords_to_test:
    print(f"{password:20} -> {'Strong' if is_valid_password(password) else 'Weak'}")

# Text processing
print("\n=== Text Processing ===")
text = """
Data science is an interdisciplinary field that uses scientific methods,
processes, algorithms, and systems to extract knowledge and insights from
structured and unstructured data. Data science is related to data mining,
machine learning, and big data.
"""

# Clean text: remove punctuation, convert to lowercase, split into words
clean_text = re.sub(r"[^\w\s]", "", text.lower())
words = clean_text.split()
print(f"Cleaned words (first 10): {words[:10]}")

# Find words containing "data"
data_words = [word for word in words if "data" in word]
print(f"Words containing 'data': {data_words}")

# Count word frequencies
from collections import Counter
word_freq = Counter(words)
print(f"Most common words: {word_freq.most_common(5)}")

# Extract numbers from text
print("\n=== Extracting Numbers ===")
text_with_numbers = "The price is $19.99, discount 15%, tax at 8.25%"
numbers = re.findall(r"\d+\.?\d*", text_with_numbers)
print(f"Numbers found: {numbers}")
print(f"As floats: {[float(n) for n in numbers]}")

# Replace patterns
print("\n=== Pattern Replacement ===")
text = "Contact us at support@company.com or sales@company.com"
# Redact email addresses
redacted = re.sub(r"\w+@\w+\.\w+", "[REDACTED]", text)
print(f"Original: {text}")
print(f"Redacted: {redacted}")

# Advanced pattern matching
print("\n=== Advanced Patterns ===")
# Find words that start and end with the same letter
text = "level radar civic madam refer"
palindromes = re.findall(r"\b(\w)\w*\1\b", text)
print(f"Palindromic words: {palindromes}")

# Find repeated words
text = "This is is a test test of repeated words words"
repeated = re.findall(r"\b(\w+)\s+\1\b", text)
print(f"Repeated words: {repeated}")

# Compile patterns for efficiency
print("\n=== Compiled Patterns ===")
email_compiled = re.compile(r"\w+@\w+\.\w+")
texts = [
    "Contact: user@example.com",
    "No email here",
    "Another: admin@test.org"
]

for text in texts:
    match = email_compiled.search(text)
    if match:
        print(f"Found email: {match.group()}")
    else:
        print("No email found")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>Object-Oriented Programming</h3>
                    <p>Object-oriented programming (OOP) is a paradigm that helps organize complex code by grouping related data and behavior into objects.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Object-Oriented Programming</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Basic class definition
print("=== Basic Class ===")
class Person:
    """A simple Person class."""
    
    # Class attribute
    species = "Homo sapiens"
    
    def __init__(self, name, age):
        """Initialize a Person instance."""
        self.name = name
        self.age = age
    
    def greet(self):
        """Return a greeting."""
        return f"Hello, I'm {self.name}!"
    
    def celebrate_birthday(self):
        """Increment age and return message."""
        self.age += 1
        return f"Happy {self.age}th birthday!"

# Create instances
person1 = Person("Alice", 30)
person2 = Person("Bob", 25)

print(f"Person 1: {person1.name}, {person1.age}")
print(f"Person 2: {person2.name}, {person2.age}")
print(f"Species: {Person.species}")
print(person1.greet())
print(person1.celebrate_birthday())
print(f"New age: {person1.age}")

# Inheritance
print("\n=== Inheritance ===")
class Employee(Person):
    """Employee class inheriting from Person."""
    
    def __init__(self, name, age, employee_id, salary):
        """Initialize Employee with Person attributes plus work attributes."""
        # Call parent constructor
        super().__init__(name, age)
        self.employee_id = employee_id
        self.salary = salary
    
    def greet(self):
        """Override greet method."""
        return f"Hi, I'm {self.name}, employee #{self.employee_id}"
    
    def give_raise(self, percentage):
        """Give a raise based on percentage."""
        self.salary *= (1 + percentage / 100)
        return f"New salary: ${self.salary:,.2f}"

# Create employee
emp = Employee("Charlie", 35, "E123", 50000)
print(emp.greet())
print(emp.give_raise(10))

# Polymorphism
print("\n=== Polymorphism ===")
def introduce(person):
    """Introduce any Person or Employee."""
    print(person.greet())

people = [
    Person("Diana", 28),
    Employee("Eve", 32, "E456", 60000)
]

for person in people:
    introduce(person)

# Special methods (dunder methods)
print("\n=== Special Methods ===")
class Vector:
    """A 2D vector class."""
    
    def __init__(self, x, y):
        self.x = x
        self.y = y
    
    def __str__(self):
        """String representation."""
        return f"Vector({self.x}, {self.y})"
    
    def __repr__(self):
        """Official string representation."""
        return f"Vector({self.x}, {self.y})"
    
    def __add__(self, other):
        """Vector addition."""
        return Vector(self.x + other.x, self.y + other.y)
    
    def __mul__(self, scalar):
        """Scalar multiplication."""
        return Vector(self.x * scalar, self.y * scalar)
    
    def __eq__(self, other):
        """Equality check."""
        return self.x == other.x and self.y == other.y

v1 = Vector(3, 4)
v2 = Vector(1, 2)
v3 = v1 + v2
v4 = v1 * 2

print(f"v1: {v1}")
print(f"v2: {v2}")
print(f"v1 + v2: {v3}")
print(f"v1 * 2: {v4}")
print(f"v1 == v2: {v1 == v2}")

# Properties
print("\n=== Properties ===")
class Temperature:
    """Temperature class with Celsius and Fahrenheit."""
    
    def __init__(self, celsius=0):
        self._celsius = celsius
    
    @property
    def celsius(self):
        """Get Celsius temperature."""
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        """Set Celsius temperature."""
        if value < -273.15:
            raise ValueError("Temperature below absolute zero!")
        self._celsius = value
    
    @property
    def fahrenheit(self):
        """Get Fahrenheit temperature."""
        return self._celsius * 9/5 + 32
    
    @fahrenheit.setter
    def fahrenheit(self, value):
        """Set Fahrenheit temperature."""
        self.celsius = (value - 32) * 5/9

temp = Temperature(25)
print(f"Celsius: {temp.celsius}")
print(f"Fahrenheit: {temp.fahrenheit}")

temp.fahrenheit = 86
print(f"After setting to 86°F:")
print(f"Celsius: {temp.celsius}")

# Class methods and static methods
print("\n=== Class and Static Methods ===")
class MathUtils:
    """Utility class for math operations."""
    
    PI = 3.14159
    
    @classmethod
    def circle_area(cls, radius):
        """Calculate circle area using class constant."""
        return cls.PI * radius ** 2
    
    @staticmethod
    def factorial(n):
        """Calculate factorial (doesn't need class or instance)."""
        if n <= 1:
            return 1
        return n * MathUtils.factorial(n - 1)

print(f"Circle area (r=5): {MathUtils.circle_area(5):.2f}")
print(f"Factorial of 5: {MathUtils.factorial(5)}")

# Abstract base classes
print("\n=== Abstract Base Classes ===")
from abc import ABC, abstractmethod

class Shape(ABC):
    """Abstract base class for shapes."""
    
    @abstractmethod
    def area(self):
        """Calculate area."""
        pass
    
    @abstractmethod
    def perimeter(self):
        """Calculate perimeter."""
        pass

class Rectangle(Shape):
    """Rectangle implementation of Shape."""
    
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)

class Circle(Shape):
    """Circle implementation of Shape."""
    
    def __init__(self, radius):
        self.radius = radius
    
    def area(self):
        return MathUtils.PI * self.radius ** 2
    
    def perimeter(self):
        return 2 * MathUtils.PI * self.radius

shapes = [Rectangle(4, 5), Circle(3)]
for shape in shapes:
    print(f"{shape.__class__.__name__}: Area={shape.area():.2f}, Perimeter={shape.perimeter():.2f}")

# Multiple inheritance
print("\n=== Multiple Inheritance ===")
class Flyable:
    """Mixin for flying capability."""
    def fly(self):
        return f"{self.__class__.__name__} is flying!"

class Swimmable:
    """Mixin for swimming capability."""
    def swim(self):
        return f"{self.__class__.__name__} is swimming!"

class Duck(Flyable, Swimmable):
    """Duck can both fly and swim."""
    def quack(self):
        return "Quack!"

duck = Duck()
print(duck.fly())
print(duck.swim())
print(duck.quack())

# Data classes (Python 3.7+ style)
print("\n=== Data Class Pattern ===")
class DataPoint:
    """Simple data container class."""
    
    def __init__(self, x, y, label):
        self.x = x
        self.y = y
        self.label = label
    
    def __repr__(self):
        return f"DataPoint(x={self.x}, y={self.y}, label='{self.label}')"

points = [
    DataPoint(1, 2, "A"),
    DataPoint(3, 4, "B"),
    DataPoint(5, 6, "C")
]

print("Data points:")
for point in points:
    print(f"  {point}")</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>

                <div class="content-block">
                    <h3>Functional Tools</h3>
                    <p>Python provides several functional programming tools that can make your code more concise and expressive.</p>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">Python Code: Functional Tools</div>
                            <div class="code-actions">
                                <button class="copy-button" onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button class="run-button" onclick="runCode(this)">
                                    <i class="fas fa-play"></i> Run
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-python"># Map function
print("=== Map Function ===")
numbers = [1, 2, 3, 4, 5]

# Using map with a lambda
squared = list(map(lambda x: x**2, numbers))
print(f"Original: {numbers}")
print(f"Squared: {squared}")

# Using map with a regular function
def cube(x):
    return x**3

cubed = list(map(cube, numbers))
print(f"Cubed: {cubed}")

# Map with multiple iterables
list1 = [1, 2, 3]
list2 = [10, 20, 30]
summed = list(map(lambda x, y: x + y, list1, list2))
print(f"Sum of lists: {summed}")

# Filter function
print("\n=== Filter Function ===")
numbers = list(range(1, 21))

# Filter even numbers
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(f"Even numbers: {evens}")

# Filter with regular function
def is_prime(n):
    """Check if a number is prime."""
    if n < 2:
        return False
    for i in range(2, int(n**0.5) + 1):
        if n % i == 0:
            return False
    return True

primes = list(filter(is_prime, numbers))
print(f"Prime numbers: {primes}")

# Reduce function
print("\n=== Reduce Function ===")
from functools import reduce

# Sum all numbers
total = reduce(lambda x, y: x + y, numbers)
print(f"Sum of 1-20: {total}")

# Find maximum
maximum = reduce(lambda x, y: x if x > y else y, numbers)
print(f"Maximum: {maximum}")

# Factorial using reduce
factorial_5 = reduce(lambda x, y: x * y, range(1, 6))
print(f"5! = {factorial_5}")

# Partial functions
print("\n=== Partial Functions ===")
from functools import partial

def power(base, exponent):
    return base ** exponent

# Create specialized functions
square = partial(power, exponent=2)
cube = partial(power, exponent=3)

print(f"Square of 5: {square(5)}")
print(f"Cube of 5: {cube(5)}")

# Partial with positional arguments
multiply_by_2 = partial(lambda x, y: x * y, 2)
print(f"2 * 10 = {multiply_by_2(10)}")

# Function composition
print("\n=== Function Composition ===")
def compose(f, g):
    """Return a new function that is f(g(x))."""
    return lambda x: f(g(x))

# Create composed functions
add_1 = lambda x: x + 1
square = lambda x: x ** 2

# First add 1, then square
add_then_square = compose(square, add_1)
print(f"(5 + 1)^2 = {add_then_square(5)}")

# First square, then add 1
square_then_add = compose(add_1, square)
print(f"5^2 + 1 = {square_then_add(5)}")

# Caching with lru_cache
print("\n=== Caching with lru_cache ===")
from functools import lru_cache
import time

@lru_cache(maxsize=128)
def fibonacci(n):
    """Calculate Fibonacci number with caching."""
    if n < 2:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# Time the execution
start = time.time()
result = fibonacci(35)
end = time.time()

print(f"Fibonacci(35) = {result}")
print(f"Time taken: {end - start:.4f} seconds")
print(f"Cache info: {fibonacci.cache_info()}")

# Higher-order functions
print("\n=== Higher-Order Functions ===")
def apply_twice(func, x):
    """Apply a function twice to x."""
    return func(func(x))

def add_5(x):
    return x + 5

print(f"add_5(add_5(10)) = {apply_twice(add_5, 10)}")

# Function that returns functions
def make_multiplier(n):
    """Return a function that multiplies by n."""
    def multiplier(x):
        return x * n
    return multiplier

times_3 = make_multiplier(3)
times_10 = make_multiplier(10)

print(f"5 * 3 = {times_3(5)}")
print(f"5 * 10 = {times_10(5)}")

# Currying
print("\n=== Currying ===")
def curry_add(x):
    """Curried addition function."""
    def inner(y):
        return x + y
    return inner

add_5 = curry_add(5)
print(f"5 + 3 = {add_5(3)}")

# General curry function
def curry(func):
    """Curry a function with multiple arguments."""
    def curried(*args):
        if len(args) >= func.__code__.co_argcount:
            return func(*args)
        return lambda *more_args: curried(*(args + more_args))
    return curried

@curry
def add_three(a, b, c):
    return a + b + c

add_1 = add_three(1)
add_1_2 = add_1(2)
result = add_1_2(3)
print(f"1 + 2 + 3 = {result}")

# Functional data processing pipeline
print("\n=== Functional Pipeline ===")
def pipeline(data, *functions):
    """Apply a series of functions to data."""
    return reduce(lambda acc, f: f(acc), functions, data)

# Sample data
numbers = list(range(1, 11))

# Define processing functions
filter_evens = lambda x: [n for n in x if n % 2 == 0]
square_all = lambda x: [n**2 for n in x]
sum_all = lambda x: sum(x)

# Create pipeline
result = pipeline(numbers, filter_evens, square_all, sum_all)
print(f"Pipeline result: {result}")
print(f"Manual calculation: {sum([n**2 for n in numbers if n % 2 == 0])}")

# Lazy evaluation with generators
print("\n=== Lazy Evaluation ===")
def infinite_range(start):
    """Generate infinite range starting from start."""
    while True:
        yield start
        start += 1

# Take first 10 even numbers from infinite range
evens = (x for x in infinite_range(0) if x % 2 == 0)
first_10_evens = [next(evens) for _ in range(10)]
print(f"First 10 even numbers: {first_10_evens}")

# Memoization decorator
print("\n=== Memoization Decorator ===")
def memoize(func):
    """Simple memoization decorator."""
    cache = {}
    def wrapper(*args):
        if args not in cache:
            cache[args] = func(*args)
        return cache[args]
    return wrapper

@memoize
def expensive_function(x, y):
    """Simulate an expensive computation."""
    print(f"Computing {x} + {y}...")
    time.sleep(0.1)  # Simulate work
    return x + y

print("First calls:")
print(expensive_function(1, 2))
print(expensive_function(3, 4))

print("\nSecond calls (should be instant):")
print(expensive_function(1, 2))
print(expensive_function(3, 4))</code></pre>
                        </div>
                        <div class="code-output"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const menuToggle = document.getElementById('menuToggle');
        const navItems = document.querySelectorAll('.nav-item');
        const subNavItems = document.querySelectorAll('.sub-nav-item');
        const contentSections = document.querySelectorAll('.content-section');
        const progressBar = document.getElementById('progressBar');
        const tocContainer = document.getElementById('tocContainer');
        const tocContent = document.getElementById('tocContent');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
            initializeCodeBlocks();
            initializeVisualizations();
            generateTableOfContents();
            updateProgressBar();
        });

        // Navigation functionality
        function initializeNavigation() {
            // Mobile menu toggle
            menuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });

            // Main navigation items
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    
                    // Handle sub-menu toggle for machine learning
                    if (sectionId === 'machine-learning') {
                        const subMenu = this.querySelector('.sub-menu');
                        if (subMenu) {
                            subMenu.classList.toggle('active');
                            return;
                        }
                    }
                    
                    // Switch to the selected section
                    switchSection(sectionId);
                    
                    // Update active state
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Close mobile menu
                    sidebar.classList.remove('active');
                });
            });

            // Sub-navigation items
            subNavItems.forEach(item => {
                item.addEventListener('click', function() {
                    const sectionId = this.getAttribute('data-section');
                    switchSection(sectionId);
                    
                    // Update active state
                    subNavItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Close mobile menu
                    sidebar.classList.remove('active');
                });
            });
        }

        // Switch between content sections
        function switchSection(sectionId) {
            contentSections.forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                updateProgressBar();
                generateTableOfContents();
                
                // Scroll to top of content
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        }

        // Code block functionality
        function initializeCodeBlocks() {
            const runButtons = document.querySelectorAll('.run-button');
            const copyButtons = document.querySelectorAll('.copy-button');
            
            // Run code buttons
            runButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const codeContainer = this.closest('.code-container');
                    const codeBlock = codeContainer.querySelector('.code-block pre code');
                    const outputDiv = codeContainer.querySelector('.code-output');
                    
                    // Show loading state
                    const originalHTML = this.innerHTML;
                    this.innerHTML = '<span class="loading"></span> Running...';
                    this.disabled = true;
                    
                    // Simulate code execution (in a real app, this would send code to a backend)
                    setTimeout(() => {
                        try {
                            // Get the code text
                            const codeText = codeBlock.textContent;
                            
                            // Execute the code and capture output
                            const output = executePythonCode(codeText);
                            
                            // Display the output
                            outputDiv.textContent = output;
                            outputDiv.classList.add('active');
                            
                            // Reset button
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                        } catch (error) {
                            outputDiv.textContent = `Error: ${error.message}`;
                            outputDiv.classList.add('active');
                            
                            // Reset button
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                        }
                    }, 1000);
                });
            });
            
            // Copy code buttons
            copyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const codeContainer = this.closest('.code-container');
                    const codeBlock = codeContainer.querySelector('.code-block pre code');
                    const codeText = codeBlock.textContent;
                    
                    // Copy to clipboard
                    navigator.clipboard.writeText(codeText).then(() => {
                        // Show success state
                        const originalHTML = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                    });
                });
            });
        }

        // Simulate Python code execution
        function executePythonCode(code) {
            // This is a simplified simulation of Python code execution
            // In a real application, this would be handled by a backend service
            
            // Remove comments and clean up the code
            const cleanedCode = code
                .split('\n')
                .filter(line => !line.trim().startsWith('#'))
                .join('\n');
            
            // Create a mock output based on common patterns
            let output = '';
            
            // Handle print statements
            const printMatches = cleanedCode.match(/print\((.*?)\)/g);
            if (printMatches) {
                printMatches.forEach(match => {
                    const content = match.match(/print\((.*?)\)/)[1];
                    
                    // Handle f-strings
                    if (content.includes('f"') || content.includes("f'")) {
                        // Simple f-string simulation
                        const fStringContent = content.replace(/["']/g, '');
                        output += fStringContent + '\n';
                    } 
                    // Handle regular strings
                    else if ((content.startsWith('"') && content.endsWith('"')) || 
                             (content.startsWith("'") && content.endsWith("'"))) {
                        output += content.slice(1, -1) + '\n';
                    }
                    // Handle variables (simplified)
                    else {
                        output += `[Value of ${content}]\n`;
                    }
                });
            }
            
            // Handle list comprehensions and other expressions
            if (cleanedCode.includes('[') && cleanedCode.includes('for') && cleanedCode.includes('in')) {
                output += `[1, 4, 9, 16, 25, 36, 49, 64, 81, 100]\n`;
            }
            
            // Handle function definitions
            if (cleanedCode.includes('def ')) {
                output += `Function defined successfully\n`;
            }
            
            // Handle imports
            if (cleanedCode.includes('import ')) {
                output += `Module imported successfully\n`;
            }
            
            // If no specific patterns matched, provide a generic success message
            if (!output) {
                output += `Code executed successfully\n`;
            }
            
            return output;
        }

        // Initialize visualizations
        function initializeVisualizations() {
            // Data Growth Chart
            const dataGrowthCtx = document.getElementById('dataGrowthChart');
            if (dataGrowthCtx) {
                new Chart(dataGrowthCtx, {
                    type: 'line',
                    data: {
                        labels: ['2010', '2012', '2014', '2016', '2018', '2020', '2022', '2024'],
                        datasets: [{
                            label: 'Global Data Volume (Zettabytes)',
                            data: [2, 5, 10, 18, 33, 64, 97, 147],
                            backgroundColor: 'rgba(52, 152, 219, 0.2)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 2,
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Exponential Growth of Global Data'
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Zettabytes'
                                }
                            }
                        }
                    }
                });
            }

            // Venn Diagram (simplified with a bubble chart)
            const vennCtx = document.getElementById('vennDiagram');
            if (vennCtx) {
                new Chart(vennCtx, {
                    type: 'bubble',
                    data: {
                        datasets: [
                            {
                                label: 'Hacking Skills',
                                data: [{x: 10, y: 10, r: 25}],
                                backgroundColor: 'rgba(255, 99, 132, 0.5)'
                            },
                            {
                                label: 'Math & Stats',
                                data: [{x: 20, y: 10, r: 25}],
                                backgroundColor: 'rgba(54, 162, 235, 0.5)'
                            },
                            {
                                label: 'Substantive Expertise',
                                data: [{x: 15, y: 20, r: 25}],
                                backgroundColor: 'rgba(255, 206, 86, 0.5)'
                            },
                            {
                                label: 'Data Science',
                                data: [{x: 15, y: 13, r: 15}],
                                backgroundColor: 'rgba(75, 192, 192, 0.7)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Data Science Venn Diagram'
                            },
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            x: {display: false},
                            y: {display: false}
                        }
                    }
                });
            }

            // Network Chart
            const networkCtx = document.getElementById('networkChart');
            if (networkCtx) {
                // Create a simple network visualization
                const networkData = {
                    nodes: [
                        {id: 0, name: 'Hero'},
                        {id: 1, name: 'Dunn'},
                        {id: 2, name: 'Sue'},
                        {id: 3, name: 'Chi'},
                        {id: 4, name: 'Thor'},
                        {id: 5, name: 'Clive'},
                        {id: 6, name: 'Hicks'},
                        {id: 7, name: 'Devin'},
                        {id: 8, name: 'Kate'},
                        {id: 9, name: 'Klein'}
                    ],
                    edges: [
                        {source: 0, target: 1},
                        {source: 0, target: 2},
                        {source: 1, target: 2},
                        {source: 1, target: 3},
                        {source: 2, target: 3},
                        {source: 3, target: 4},
                        {source: 4, target: 5},
                        {source: 5, target: 6},
                        {source: 5, target: 7},
                        {source: 6, target: 8},
                        {source: 7, target: 8},
                        {source: 8, target: 9}
                    ]
                };

                // Create a scatter plot with lines for edges
                const nodePositions = [
                    {x: 2, y: 3},  // Hero
                    {x: 1, y: 2},  // Dunn
                    {x: 3, y: 2},  // Sue
                    {x: 2, y: 1},  // Chi
                    {x: 3, y: 0},  // Thor
                    {x: 4, y: 1},  // Clive
                    {x: 5, y: 2},  // Hicks
                    {x: 4, y: 0},  // Devin
                    {x: 5, y: 1},  // Kate
                    {x: 6, y: 2}   // Klein
                ];

                // Create datasets for nodes and edges
                const nodeDataset = {
                    label: 'Users',
                    data: nodePositions.map((pos, i) => ({
                        x: pos.x,
                        y: pos.y,
                        label: networkData.nodes[i].name
                    })),
                    backgroundColor: 'rgba(52, 152, 219, 0.7)',
                    borderColor: 'rgba(52, 152, 219, 1)',
                    borderWidth: 2,
                    pointRadius: 8,
                    pointHoverRadius: 10
                };

                // Create edge lines (simplified approach)
                const edgeDatasets = networkData.edges.map(edge => {
                    const sourcePos = nodePositions[edge.source];
                    const targetPos = nodePositions[edge.target];
                    return {
                        label: 'Connection',
                        data: [
                            {x: sourcePos.x, y: sourcePos.y},
                            {x: targetPos.x, y: targetPos.y}
                        ],
                        borderColor: 'rgba(200, 200, 200, 0.5)',
                        borderWidth: 2,
                        fill: false,
                        showLine: true,
                        pointRadius: 0
                    };
                });

                new Chart(networkCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [...edgeDatasets, nodeDataset]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'DataSciencester Network'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        if (context.dataset.label === 'Users') {
                                            return context.raw.label;
                                        }
                                        return null;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                display: false,
                                min: 0,
                                max: 7
                            },
                            y: {
                                display: false,
                                min: -1,
                                max: 4
                            }
                        }
                    }
                });
            }

            // Friends Chart
            const friendsCtx = document.getElementById('friendsChart');
            if (friendsCtx) {
                new Chart(friendsCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Clive', 'Sue', 'Chi', 'Dunn', 'Hero', 'Thor', 'Hicks', 'Devin', 'Kate', 'Klein'],
                        datasets: [{
                            label: 'Number of Friends',
                            data: [3, 3, 3, 3, 2, 2, 2, 2, 2, 1],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Number of Friends per User'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Friends'
                                }
                            }
                        }
                    }
                });
            }

            // Mutual Friends Chart
            const mutualFriendsCtx = document.getElementById('mutualFriendsChart');
            if (mutualFriendsCtx) {
                new Chart(mutualFriendsCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Sue', 'Thor', 'Hicks', 'Devin', 'Kate'],
                        datasets: [{
                            label: 'Mutual Friends',
                            data: [2, 2, 2, 2, 1],
                            backgroundColor: 'rgba(75, 192, 192, 0.7)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Mutual Friends for Chi'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Mutual Friends'
                                }
                            }
                        }
                    }
                });
            }

            // Salary Chart
            const salaryCtx = document.getElementById('salaryChart');
            if (salaryCtx) {
                new Chart(salaryCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: 'Salary vs. Experience',
                            data: [
                                {x: 0.7, y: 48000},
                                {x: 1.9, y: 48000},
                                {x: 2.5, y: 60000},
                                {x: 4.2, y: 63000},
                                {x: 6.0, y: 76000},
                                {x: 6.5, y: 69000},
                                {x: 7.5, y: 76000},
                                {x: 8.1, y: 88000},
                                {x: 8.7, y: 83000},
                                {x: 10.0, y: 83000}
                            ],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Salary by Years of Experience'
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Years of Experience'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Salary ($)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Salary Bucket Chart
            const salaryBucketCtx = document.getElementById('salaryBucketChart');
            if (salaryBucketCtx) {
                new Chart(salaryBucketCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Less than 2 years', 'Between 2 and 5 years', 'More than 5 years'],
                        datasets: [{
                            label: 'Average Salary',
                            data: [48000, 63000, 79000],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.7)',
                                'rgba(255, 206, 86, 0.7)',
                                'rgba(75, 192, 192, 0.7)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Average Salary by Tenure Bucket'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Average Salary ($)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Paid Accounts Chart
            const paidAccountsCtx = document.getElementById('paidAccountsChart');
            if (paidAccountsCtx) {
                new Chart(paidAccountsCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [
                            {
                                label: 'Paid',
                                data: [
                                    {x: 0.7, y: 1},
                                    {x: 2.5, y: 1},
                                    {x: 8.7, y: 1},
                                    {x: 10.0, y: 1}
                                ],
                                backgroundColor: 'rgba(75, 192, 192, 0.7)',
                                borderColor: 'rgba(75, 192, 192, 1)',
                                borderWidth: 1,
                                pointRadius: 8
                            },
                            {
                                label: 'Unpaid',
                                data: [
                                    {x: 1.9, y: 0},
                                    {x: 4.2, y: 0},
                                    {x: 6.0, y: 0},
                                    {x: 6.5, y: 0},
                                    {x: 7.5, y: 0},
                                    {x: 8.1, y: 0}
                                ],
                                backgroundColor: rgba(255, 99, 132, 0.7),
                                borderColor: rgba(255, 99, 132, 1),
                                borderWidth: 1,
                                pointRadius: 8
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Paid Accounts by Experience'
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Years of Experience'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Account Status'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value === 1 ? 'Paid' : 'Unpaid';
                                    }
                                },
                                min: -0.5,
                                max: 1.5
                            }
                        }
                    }
                });
            }

            // Topics Chart
            const topicsCtx = document.getElementById('topicsChart');
            if (topicsCtx) {
                new Chart(topicsCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Python', 'Big Data', 'machine learning', 'statistics', 'Java', 'data', 'learning', 'science', 'regression', 'Hadoop'],
                        datasets: [{
                            label: 'Number of Users',
                            data: [5, 4, 3, 3, 3, 3, 3, 3, 2, 2],
                            backgroundColor: 'rgba(52, 152, 219, 0.7)',
                            borderColor: 'rgba(52, 152, 219, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Most Popular Topics'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Users'
                                }
                            }
                        }
                    }
                });
            }

            // Word Cloud Chart (simplified as a bubble chart)
            const wordCloudCtx = document.getElementById('wordCloudChart');
            if (wordCloudCtx) {
                const wordCloudData = [
                    {x: Math.random() * 10, y: Math.random() * 10, r: 25, label: 'Python'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 20, label: 'Big Data'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 18, label: 'machine learning'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 15, label: 'statistics'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 15, label: 'Java'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 12, label: 'data'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 12, label: 'learning'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 12, label: 'science'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 10, label: 'regression'},
                    {x: Math.random() * 10, y: Math.random() * 10, r: 10, label: 'Hadoop'}
                ];

                new Chart(wordCloudCtx, {
                    type: 'bubble',
                    data: {
                        datasets: [{
                            label: 'Topics',
                            data: wordCloudData,
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.6)',
                                'rgba(54, 162, 235, 0.6)',
                                'rgba(255, 206, 86, 0.6)',
                                'rgba(75, 192, 192, 0.6)',
                                'rgba(153, 102, 255, 0.6)',
                                'rgba(255, 159, 64, 0.6)',
                                'rgba(199, 199, 199, 0.6)',
                                'rgba(83, 102, 255, 0.6)',
                                'rgba(255, 99, 255, 0.6)',
                                'rgba(99, 255, 132, 0.6)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Word Cloud of Interests'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.raw.label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {display: false},
                            y: {display: false}
                        }
                    }
                });
            }
        }

        // Generate table of contents
        function generateTableOfContents() {
            const activeSection = document.querySelector('.content-section.active');
            if (!activeSection) return;

            const headings = activeSection.querySelectorAll('h2, h3, h4');
            tocContent.innerHTML = '';

            headings.forEach((heading, index) => {
                const tocItem = document.createElement('div');
                tocItem.className = 'toc-item';
                tocItem.textContent = heading.textContent;
                tocItem.setAttribute('data-target', heading.id || `heading-${index}`);
                
                // Add indentation for subheadings
                if (heading.tagName === 'H3') {
                    tocItem.style.paddingLeft = '20px';
                } else if (heading.tagName === 'H4') {
                    tocItem.style.paddingLeft = '40px';
                }
                
                // Add click event to scroll to heading
                tocItem.addEventListener('click', function() {
                    heading.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Update active state
                    document.querySelectorAll('.toc-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                });
                
                tocContent.appendChild(tocItem);
            });
        }

        // Update progress bar
        function updateProgressBar() {
            const activeSection = document.querySelector('.content-section.active');
            if (!activeSection) return;

            const sectionHeight = activeSection.scrollHeight;
            const viewportHeight = window.innerHeight;
            const scrollPosition = window.scrollY;
            const sectionTop = activeSection.offsetTop;
            
            let progress = 0;
            if (scrollPosition > sectionTop) {
                const scrolledInSection = scrollPosition - sectionTop;
                progress = Math.min((scrolledInSection / (sectionHeight - viewportHeight)) * 100, 100);
            }
            
            progressBar.style.width = `${progress}%`;
        }

        // Update progress on scroll
        window.addEventListener('scroll', updateProgressBar);

        // Handle window resize
        window.addEventListener('resize', function() {
            // Reinitialize charts if needed
            const charts = document.querySelectorAll('canvas');
            Chart.helpers.each(Chart.instances, function(instance) {
                instance.resize();
            });
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + K to focus search (if search is implemented)
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                // Focus search input if implemented
            }
            
            // Escape to close mobile menu
            if (e.key === 'Escape') {
                sidebar.classList.remove('active');
            }
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add animation to elements when they come into view
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe content blocks for animation
        document.querySelectorAll('.content-block').forEach(block => {
            block.style.opacity = '0';
            block.style.transform = 'translateY(20px)';
            block.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(block);
        });

        // Theme toggle (if implemented)
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-theme');
        }

        // Print functionality
        function printContent() {
            window.print();
        }

        // Export notes functionality (if implemented)
        function exportNotes() {
            const notes = document.querySelectorAll('.note-highlight');
            const notesContent = Array.from(notes).map(note => note.textContent).join('\n\n');
            
            const blob = new Blob([notesContent], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'data-science-notes.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Search functionality (placeholder)
        function searchContent(query) {
            // Implement search functionality
            console.log('Searching for:', query);
        }

        // Bookmark functionality
        function bookmarkSection(sectionId) {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarks') || '[]');
            if (!bookmarks.includes(sectionId)) {
                bookmarks.push(sectionId);
                localStorage.setItem('bookmarks', JSON.stringify(bookmarks));
                showNotification('Section bookmarked!');
            } else {
                showNotification('Section already bookmarked');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#3498db'};
                color: white;
                border-radius: 5px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
            
            .dark-theme {
                --primary-color: #ecf0f1;
                --secondary-color: #3498db;
                --dark-color: #2c3e50;
                --light-color: #34495e;
                background-color: #1a1a1a;
                color: #ecf0f1;
            }
            
            .dark-theme .main-content {
                background-color: #1a1a1a;
            }
            
            .dark-theme .code-container {
                background: #1e1e1e;
            }
            
            .dark-theme .viz-container {
                background-color: #2c2c2c;
            }
            
            .notification {
                font-family: 'Source Sans Pro', sans-serif;
            }
        `;
        document.head.appendChild(style);

        // Initialize tooltips
        function initializeTooltips() {
            const tooltipElements = document.querySelectorAll('[data-tooltip]');
            
            tooltipElements.forEach(element => {
                element.addEventListener('mouseenter', function(e) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'tooltip';
                    tooltip.textContent = this.getAttribute('data-tooltip');
                    tooltip.style.cssText = `
                        position: absolute;
                        background: rgba(0, 0, 0, 0.8);
                        color: white;
                        padding: 5px 10px;
                        border-radius: 4px;
                        font-size: 14px;
                        z-index: 10000;
                        pointer-events: none;
                        white-space: nowrap;
                    `;
                    
                    document.body.appendChild(tooltip);
                    
                    const rect = this.getBoundingClientRect();
                    tooltip.style.left = rect.left + (rect.width / 2) - (tooltip.offsetWidth / 2) + 'px';
                    tooltip.style.top = rect.top - tooltip.offsetHeight - 5 + 'px';
                    
                    this._tooltip = tooltip;
                });
                
                element.addEventListener('mouseleave', function() {
                    if (this._tooltip) {
                        document.body.removeChild(this._tooltip);
                        this._tooltip = null;
                    }
                });
            });
        }

        // Initialize tooltips when DOM is ready
        initializeTooltips();

        // Track reading progress
        function trackReadingProgress() {
            const activeSection = document.querySelector('.content-section.active');
            if (!activeSection) return;

            const sectionId = activeSection.id;
            const progress = updateProgressBar();
            
            // Save progress to localStorage
            const progressData = JSON.parse(localStorage.getItem('readingProgress') || '{}');
            progressData[sectionId] = progress;
            localStorage.setItem('readingProgress', JSON.stringify(progressData));
        }

        // Update reading progress on scroll
        let scrollTimeout;
        window.addEventListener('scroll', function() {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(trackReadingProgress, 100);
        });

        // Add keyboard navigation for sections
        let currentSectionIndex = 0;
        const sections = Array.from(document.querySelectorAll('.content-section'));

        document.addEventListener('keydown', function(e) {
            // Alt + Left/Right arrows to navigate sections
            if (e.altKey && !e.ctrlKey && !e.metaKey) {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    currentSectionIndex = Math.max(0, currentSectionIndex - 1);
                    const prevSection = sections[currentSectionIndex];
                    if (prevSection) {
                        switchSection(prevSection.id);
                        updateActiveNavItem(prevSection.id);
                    }
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    currentSectionIndex = Math.min(sections.length - 1, currentSectionIndex + 1);
                    const nextSection = sections[currentSectionIndex];
                    if (nextSection) {
                        switchSection(nextSection.id);
                        updateActiveNavItem(nextSection.id);
                    }
                }
            }
        });

        // Update active navigation item
        function updateActiveNavItem(sectionId) {
            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === sectionId) {
                    item.classList.add('active');
                }
            });
            
            subNavItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === sectionId) {
                    item.classList.add('active');
                }
            });
        }

        // Add print styles
        const printStyles = document.createElement('style');
        printStyles.textContent = `
            @media print {
                .sidebar, .menu-toggle, .toc-container, .progress-container, .code-actions {
                    display: none !important;
                }
                
                .main-content {
                    margin-left: 0 !important;
                    max-width: 100% !important;
                    padding: 20px !important;
                }
                
                .content-section {
                    display: block !important;
                }
                
                .code-container {
                    break-inside: avoid;
                }
                
                .viz-container {
                    break-inside: avoid;
                }
            }
        `;
        document.head.appendChild(printStyles);

        // Performance monitoring
        function trackPerformance() {
            if ('performance' in window) {
                window.addEventListener('load', function() {
                    setTimeout(function() {
                        const perfData = performance.getEntriesByType('navigation')[0];
                        console.log('Page load time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
                    }, 0);
                });
            }
        }

        trackPerformance();

        // Error handling
        window.addEventListener('error', function(e) {
            console.error('JavaScript error:', e.error);
            showNotification('An error occurred. Please refresh the page.', 'error');
        });

        // Service Worker registration (for PWA support)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        // Initialize application
        console.log('Data Science Learning Platform initialized successfully!');
    </script>
</body>
</html>
